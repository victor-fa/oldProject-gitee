

<app-left-nav></app-left-nav>
<div class="dataCenter" [ngStyle]="{'left': !commonService.isLeftNavClose ? 'calc(240px)' : 'calc(80px)','width': !commonService.isLeftNavClose ? 'calc(100% - 240px)' : 'calc(100% - 80px)'}">
  <nz-card style="width: 100%;">
    <nz-card-tab>
      <nz-tabset nzSize="large">
        <nz-tab nzTitle="{{commonService.currentTitle}}">
          <form [formGroup]="searchForm">
            <div nz-row class="search_panel">
              <div nz-col nzSpan="3">
                <button nz-button nzType="primary" (click)="shouExplain()"><i class="anticon anticon-info-circle"></i>数据说明？</button>
              </div>

              <div nz-col nzSpan="3" class="span_down right_alignment">
                查询日期范围：
              </div>
              <div nz-col nzSpan="7" class="span_down">
                <nz-range-picker formControlName="date" [nzFormat]="'yyyyMMdd'" [nzShowToday]="true" ngModel [nzRanges]="dateSearch" (ngModelChange)="onChange($event)"></nz-range-picker>
              </div>

              <div nz-col nzSpan="2" class="span_down spacing right_alignment">
                来源：
              </div>
              <div nz-col nzSpan="4">
                <nz-select [(ngModel)]="commonService.dataCenterStatus" formControlName="status">
                  <nz-option [nzLabel]="'全部'" [nzValue]="'all'"></nz-option>
                  <!-- <nz-option required [nzLabel]="'LENZE-IOS-APPSTORE'" [nzValue]="'LENZE-IOS-APPSTORE'"></nz-option> -->
                  <nz-option required [nzLabel]="'XIAOWU-IOS-TESTFLIGHT'" [nzValue]="'XIAOWU-IOS-TESTFLIGHT'"></nz-option>
                  <!-- <nz-option required [nzLabel]="'LENZE-ANDROID-APK'" [nzValue]="'LENZE-ANDROID-APK'"></nz-option> -->
                  <nz-option required [nzLabel]="'XIAOWU-ANDROID-FIRIM'" [nzValue]="'XIAOWU-ANDROID-FIRIM'"></nz-option>
                </nz-select>
              </div>

              <div nz-col nzSpan="2"></div>

              <div nz-col nzSpan="3">
                <button nz-button nzType="primary" (click)="doSearch()"><i class="anticon anticon-search"></i>查询</button>
              </div>
            </div>
          </form>

          <div class="spin" *ngIf="isSpinning">
            <nz-spin [nzSize]="'large'"></nz-spin>
          </div>
          <div *ngIf="!isSpinning">
            <app-dataApp *ngIf="commonService.dataCenter[0].active === true"></app-dataApp>
            <app-keepApp *ngIf="commonService.dataCenter[1].active === true"></app-keepApp>
            <app-dataOverview *ngIf="commonService.dataCenter[2].active === true"></app-dataOverview>
            <app-product *ngIf="commonService.dataCenter[3].active === true"></app-product>
            <app-error *ngIf="commonService.dataCenter[4].active === true"></app-error>
            <app-ticket *ngIf="commonService.dataCenter[5].active === true"></app-ticket>
            <app-train *ngIf="commonService.dataCenter[6].active === true"></app-train>
            <app-hotel *ngIf="commonService.dataCenter[7].active === true"></app-hotel>
            <app-weather *ngIf="commonService.dataCenter[8].active === true"></app-weather>
            <app-navigate *ngIf="commonService.dataCenter[9].active === true"></app-navigate>
            <app-taxi *ngIf="commonService.dataCenter[10].active === true"></app-taxi>
            <app-music *ngIf="commonService.dataCenter[11].active === true"></app-music>
          </div>

        </nz-tab>

        <!-- 弹框 —— 信息 —— 数据说明 -->
        <nz-modal [(nzVisible)]="isExplainVisiable" nzWidth="1050" nzTitle="{{commonService.currentTitle}}数据说明" [nzFooter]="ecplainModalFooter" (nzOnCancel)="hideExplain()">
          <div nz-row class="search_panel" style="text-align: center;">
            <div nz-col nzSpan="2">
              <span style="line-height: 30px;">&nbsp;</span><br>
              <ng-container *ngIf="commonService.dataCenter[0].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.dataApp; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[1].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.keepApp; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[2].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.overview; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[3].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.product; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[4].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.error; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[5].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.ticket; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[6].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.train; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[7].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.hotel; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[8].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.weather; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[9].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.navigate; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[10].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.taxi; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
              <ng-container *ngIf="commonService.dataCenter[11].active === true">
                <ng-container *ngFor="let item of commonService.checkDataOptions.music; let i=index;">
                  <label nz-checkbox [(nzChecked)]="item.checked" style="line-height: 31px;"></label><br>
                </ng-container>
              </ng-container>
            </div>
            <div nz-col nzSpan="22">
              <img *ngIf="commonService.dataCenter[0].active === true" [src]="'assets/images/dataCenter_dataApp.png'">
              <img *ngIf="commonService.dataCenter[1].active === true" [src]="'assets/images/dataCenter_keepapp.png'">
              <img *ngIf="commonService.dataCenter[2].active === true" [src]="'assets/images/dataCenter_overview.png'">
              <img *ngIf="commonService.dataCenter[3].active === true" [src]="'assets/images/dataCenter_product.png'">
              <img *ngIf="commonService.dataCenter[4].active === true" [src]="'assets/images/dataCenter_error.png'">
              <img *ngIf="commonService.dataCenter[5].active === true" [src]="'assets/images/dataCenter_ticket.png'">
              <img *ngIf="commonService.dataCenter[6].active === true" [src]="'assets/images/dataCenter_train.png'">
              <img *ngIf="commonService.dataCenter[7].active === true" [src]="'assets/images/dataCenter_hotel.png'">
              <img *ngIf="commonService.dataCenter[8].active === true" [src]="'assets/images/dataCenter_weather.png'">
              <img *ngIf="commonService.dataCenter[9].active === true" [src]="'assets/images/dataCenter_navigate.png'">
              <img *ngIf="commonService.dataCenter[10].active === true" [src]="'assets/images/dataCenter_taxi.png'">
              <img *ngIf="commonService.dataCenter[11].active === true" [src]="'assets/images/dataCenter_music.png'">
            </div>
          </div>
          <!-- 弹框和底部定制 -->
          <ng-template #ecplainModalFooter>
            <button nz-button nzType="default" (click)="hideExplain()">关闭</button>
          </ng-template>
        </nz-modal>

      </nz-tabset>
    </nz-card-tab>
  </nz-card>
</div>

