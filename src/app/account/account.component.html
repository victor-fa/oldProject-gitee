<app-left-nav></app-left-nav>
<div class="account" [ngStyle]="{'left': !commonService.isLeftNavClose ? 'calc(240px)' : 'calc(80px)','width': !commonService.isLeftNavClose ? 'calc(100% - 240px)' : 'calc(100% - 80px)'}">
  <nz-card>
    <nz-card-tab>
      <nz-tabset nzSize="large">
        <nz-tab [nzTitle]="roleTemplate" (nzClick)="changePanel('role')" *ngIf="commonService.haveMenuPermission('children', '权限配置')">
          <ng-template #roleTemplate><i class="anticon anticon-key"></i>权限配置</ng-template>
          <div nz-row>
            <div nz-col nzSpan="21">
            </div>
            <div nz-col nzSpan="3">
              <button nz-button nzType="primary" (click)="showModal('addRole', '')"><i class="anticon anticon-file-add"></i>新增角色</button>
            </div>
          </div>
          <nz-table nzBordered #rowSelectionRoleTable [nzData]="dataRole" [nzSimple]="true" *ngIf="!isSpinning">
            <thead>
              <tr>
                <th>序号</th>
                <th>角色名称</th>
                <th>描述</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of rowSelectionRoleTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.name}}</td>
                <td>{{data.desc}}</td>
                <td>
                  <button nz-button nzType="primary" (click)="showModal('modifyRole', data)" style="margin-right: 10px;"><i class="anticon anticon-form"></i>编辑</button>
                  <button nz-button nzType="primary" (click)="showModal('deleteRole', data)"><i class="anticon anticon-delete"></i>删除</button>
                </td>
              </tr>
            </tbody>
          </nz-table>
          <div class="spin" *ngIf="isSpinning">
            <nz-spin [nzSize]="'large'"></nz-spin>
          </div>

          <!-- 弹框 —— 新增 —— 新增角色 -->
          <nz-modal [(nzVisible)]="visiable.addRole" nzWidth="950" nzTitle="新增角色" [nzFooter]="addModalFooter" (nzOnCancel)="hideModal('addRole')" nzMaskClosable="false">
            <form [formGroup]="roleAddForm">
              <div nz-row>
                <div nz-col nzSpan="4" class="span_down spacing">
                  <font color="red">*</font>角色名称：
                </div>
                <div nz-col nzSpan="10">
                  <input nz-input formControlName="name" maxlength="10" [(ngModel)]="rolesItem.name" placeholder="输入角色名称" nzSize="default">
                </div>
              </div>
              <div nz-row>
                <div nz-col nzSpan="4" class="span_down spacing">
                  角色描述：
                </div>
                <div nz-col nzSpan="20">
                  <textarea rows="2" formControlName="desc" [(ngModel)]="rolesItem.desc" maxlength="50" nz-input placeholder="输入角色描述，不超过100个字符"></textarea>
                </div>
              </div>
            </form>
            <div nz-row>
              <div nz-col nzSpan="4" class="span_down spacing">
                <font color="red">*</font>权限设置：
              </div>
              <div nz-col nzSpan="10">
                <nz-checkbox-group [(ngModel)]="checkOptionsChannel"></nz-checkbox-group>
              </div>
              <div nz-col nzSpan="10" class="span_down spacing">
                一般情况仅勾选一个，如果勾选多个则可以切换平台
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="24">
                <table class="table" *ngIf="allMenu.length > 0">
                  <tr class="tr">
                    <td class="td">一级菜单</td>
                    <td>二级菜单</td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked1" (ngModelChange)="updateAllChecked('flag1')">{{allMenu[0].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group  [(ngModel)]="checkOptions1"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked2" (ngModelChange)="updateAllChecked('flag2')">{{allMenu[1].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions2"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked3" (ngModelChange)="updateAllChecked('flag3')">{{allMenu[2].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions3"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked4" (ngModelChange)="updateAllChecked('flag4')">{{allMenu[3].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions4"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked5" (ngModelChange)="updateAllChecked('flag5')">{{allMenu[4].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions5"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked6" (ngModelChange)="updateAllChecked('flag6')">{{allMenu[5].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions6"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked7" (ngModelChange)="updateAllChecked('flag7')">{{allMenu[6].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions7"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked8" (ngModelChange)="updateAllChecked('flag8')">{{allMenu[7].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions8"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked9" (ngModelChange)="updateAllChecked('flag9')">{{allMenu[8].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions9"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked10" (ngModelChange)="updateAllChecked('flag10')">{{allMenu[9].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions10"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked11" (ngModelChange)="updateAllChecked('flag11')">{{allMenu[10].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions11"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked12" (ngModelChange)="updateAllChecked('flag12')">{{allMenu[11].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions12"></nz-checkbox-group>
                    </td>
                  </tr>
                  <!-- 注释掉最后的不可见资源 -->
                  <!-- <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked13" (ngModelChange)="updateAllChecked('flag13')">{{allMenu[12].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions13"></nz-checkbox-group>
                    </td>
                  </tr> -->
                </table>
              </div>
            </div>
            <!-- 弹框和底部定制 -->
            <ng-template #addModalFooter>
              <button nz-button nzType="primary" (click)="doSave('addRole')"><i class="anticon anticon-save"></i>确定</button>
              <button nz-button nzType="default" (click)="hideModal('addRole')"><i class="anticon anticon-close-circle-o"></i>取消</button>
            </ng-template>
          </nz-modal>

          <!-- 弹框 —— 修改 —— 修改角色 -->
          <nz-modal [(nzVisible)]="visiable.modifyRole" nzWidth="950" nzTitle="修改角色" [nzFooter]="modifyRoleModalFooter" (nzOnCancel)="hideModal('modifyRole')" nzMaskClosable="false">
            <form [formGroup]="roleModifyForm">
              <div nz-row>
                <div nz-col nzSpan="4" class="span_down spacing">
                  <font color="red">*</font>角色名称：
                </div>
                <div nz-col nzSpan="10">
                  <input nz-input formControlName="name" [(ngModel)]="rolesItem.name" maxlength="10" placeholder="输入角色名称" nzSize="default">
                </div>
              </div>
              <div nz-row>
                <div nz-col nzSpan="4" class="span_down spacing">
                  角色描述：
                </div>
                <div nz-col nzSpan="20">
                  <textarea rows="2" formControlName="desc" [(ngModel)]="rolesItem.desc" maxlength="50" nz-input placeholder="输入角色说明，不超过100个字符"></textarea>
                </div>
              </div>
            </form>
            <div nz-row>
              <div nz-col nzSpan="4" class="span_down spacing">
                <font color="red">*</font>权限设置：
              </div>
              <div nz-col nzSpan="10">
                <nz-checkbox-group [(ngModel)]="checkOptionsChannel"></nz-checkbox-group>
              </div>
              <div nz-col nzSpan="10" class="span_down spacing">
                一般情况仅勾选一个，如果勾选多个则可以切换平台
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="24">
                <table class="table" *ngIf="allMenu.length > 0">
                  <tr class="tr">
                    <td class="td">一级菜单</td>
                    <td>二级菜单</td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked1" (ngModelChange)="updateAllChecked('flag1')">{{allMenu[0].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions1"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked2" (ngModelChange)="updateAllChecked('flag2')">{{allMenu[1].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions2"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked3" (ngModelChange)="updateAllChecked('flag3')">{{allMenu[2].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions3"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked4" (ngModelChange)="updateAllChecked('flag4')">{{allMenu[3].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions4"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked5" (ngModelChange)="updateAllChecked('flag5')">{{allMenu[4].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions5"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked6" (ngModelChange)="updateAllChecked('flag6')">{{allMenu[5].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions6"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked7" (ngModelChange)="updateAllChecked('flag7')">{{allMenu[6].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions7"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked8" (ngModelChange)="updateAllChecked('flag8')">{{allMenu[7].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions8"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked9" (ngModelChange)="updateAllChecked('flag9')">{{allMenu[8].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions9"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked10" (ngModelChange)="updateAllChecked('flag10')">{{allMenu[9].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions10"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked11" (ngModelChange)="updateAllChecked('flag11')">{{allMenu[10].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions11"></nz-checkbox-group>
                    </td>
                  </tr>
                  <tr class="tr">
                    <td class="td">
                      <label nz-checkbox [(ngModel)]="allChecked12" (ngModelChange)="updateAllChecked('flag12')">{{allMenu[11].name}}</label>
                    </td>
                    <td>
                      <nz-checkbox-group [(ngModel)]="checkOptions12"></nz-checkbox-group>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <!-- 弹框和底部定制 -->
            <ng-template #modifyRoleModalFooter>
              <button nz-button nzType="primary" (click)="doSave('modifyRole')"><i class="anticon anticon-save"></i>确定</button>
              <button nz-button nzType="default" (click)="hideModal('modifyRole')"><i class="anticon anticon-close-circle-o"></i>取消</button>
            </ng-template>
          </nz-modal>

        </nz-tab>


        <nz-tab [nzTitle]="customerTemplate" (nzClick)="changePanel('customer')" *ngIf="commonService.haveMenuPermission('children', '员工配置')">
          <ng-template #customerTemplate><i class="anticon anticon-solution"></i>员工配置</ng-template>
          <div nz-row>
            <form [formGroup]="searchCustomerForm">
              <div nz-col nzSpan="2" class="span_down right_alignment">
                员工姓名：
              </div>
              <div nz-col nzSpan="3">
                <input nz-input maxlength="32" formControlName="realname" placeholder="输入员工姓名" nzSize="default">
              </div>

              <div nz-col nzSpan="1"></div>

              <div nz-col nzSpan="2" class="span_down right_alignment">
                账号：
              </div>
              <div nz-col nzSpan="3" class="span_down">
                <input nz-input maxlength="32" formControlName="username" placeholder="输入账号" nzSize="default">
              </div>

              <div nz-col nzSpan="1"></div>

              <div nz-col nzSpan="2" class="span_down spacing right_alignment">
                角色名称：
              </div>
              <div nz-col nzSpan="3">
                <nz-select [ngModel]="''" formControlName="roleId">
                  <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                  <nz-option *ngFor="let item of dataRole; let i=index;" [nzLabel]="item.name" [nzValue]="item.id"></nz-option>
                </nz-select>
              </div>

            </form>

            <div nz-col nzSpan="1"></div>

            <div nz-col nzSpan="3">
              <button nz-button nzType="primary" (click)="loadData('customer')" style="margin-right: 10px;"><i class="anticon anticon-search"></i>查询</button>
            </div>
            <div nz-col nzSpan="3">
              <button nz-button nzType="primary" (click)="showModal('addCustomer', '')"><i class="anticon anticon-file-add"></i>新增员工</button>
            </div>
          </div>

          <nz-table nzBordered #rowSelectionCustomerTable [nzData]="dataCustomer" [nzSimple]="true" *ngIf="!isSpinning">
            <thead>
              <tr>
                <th>序号</th>
                <th>员工姓名</th>
                <th>账号</th>
                <th>角色名称</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of rowSelectionCustomerTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.realname}}</td>
                <td>{{data.username}}</td>
                <td>{{data.roleName}}</td>
                <td>
                  <button nz-button nzType="primary" (click)="showModal('modifyCustomer', data)" [disabled]="data.baseAcc === true" style="margin-right: 10px;"><i class="anticon anticon-form"></i>编辑</button>
                  <button nz-button nzType="primary" (click)="showModal('deleteCustomer', data)" [disabled]="data.baseAcc === true"><i class="anticon anticon-delete"></i>删除</button>
                </td>
              </tr>
            </tbody>
          </nz-table>
          <div class="spin" *ngIf="isSpinning">
            <nz-spin [nzSize]="'large'"></nz-spin>
          </div>

          <!-- 弹框 —— 新增 —— 新增员工 -->
          <nz-modal [(nzVisible)]="visiable.addCustomer" nzWidth="750" nzTitle="新增员工" [nzFooter]="addRoleModalFooter" (nzOnCancel)="hideModal('addCustomer')" nzMaskClosable="false">
            <form [formGroup]="customerAddForm">
              <div nz-row>
                <div nz-col nzSpan="6" class="span_down spacing right_alignment">
                  <font color="red">*</font>员工账号：
                </div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="username" maxlength="12" [(ngModel)]="customerItem.username" placeholder="输入员工账号" nzSize="default">
                </div>
              </div>
              <div nz-row>
                <div nz-col nzSpan="6" class="span_down spacing right_alignment">
                    <font color="red">*</font>员工姓名：
                </div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="realname" [(ngModel)]="customerItem.realname" placeholder="输入员工姓名" nzSize="default">
                </div>
              </div>
              <div nz-row>
                <div nz-col nzSpan="6" class="span_down spacing right_alignment">
                    <font color="red">*</font>登录密码：
                </div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="password" [(ngModel)]="customerItem.password" type="password" placeholder="输入登录密码" nzSize="default">
                </div>
              </div>
              <div nz-row>
                <div nz-col nzSpan="6" class="span_down spacing right_alignment">
                    <font color="red">*</font>角色：
                </div>
                <div nz-col nzSpan="12">
                  <nz-select [ngModel]="''" formControlName="roleId">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option *ngFor="let item of dataRole; let i=index;" [nzLabel]="item.name" [nzValue]="item.id"></nz-option>
                  </nz-select>
                </div>
              </div>
            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #addRoleModalFooter>
              <button nz-button nzType="primary" (click)="doSave('addCustomer')"><i class="anticon anticon-save"></i>确认</button>
              <button nz-button nzType="default" (click)="hideModal('addCustomer')"><i class="anticon anticon-close-circle-o"></i>取消</button>
            </ng-template>
          </nz-modal>

          <!-- 弹框 —— 修改 —— 修改用户信息 -->
          <nz-modal [(nzVisible)]="visiable.modifyCustomer" nzWidth="750" nzTitle="修改用户信息" [nzFooter]="modifyCustomerModalFooter" (nzOnCancel)="hideModal('modifyCustomer')" nzMaskClosable="false">
            <form [formGroup]="customerModifyForm">
              <div nz-row>
                <div nz-col nzSpan="6" class="span_down spacing right_alignment">
                  <font color="red">*</font>员工账号：
                </div>
                <div nz-col nzSpan="12" class="span_down">
                  {{customerItem.username}}
                </div>
              </div>
              <div nz-row>
                <div nz-col nzSpan="6" class="span_down spacing right_alignment">
                    <font color="red">*</font>员工姓名：
                </div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="realname" [(ngModel)]="customerItem.realname" placeholder="输入员工姓名" nzSize="default">
                </div>
              </div>
              <div nz-row>
                <div nz-col nzSpan="6" class="span_down spacing right_alignment">
                    <font color="red">*</font>登录密码：
                </div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="password" [(ngModel)]="customerItem.password" type="password" placeholder="输入登录密码" nzSize="default">
                </div>
              </div>
              <div nz-row>
                <div nz-col nzSpan="6" class="span_down spacing right_alignment">
                    <font color="red">*</font>角色：
                </div>
                <div nz-col nzSpan="12">
                  <nz-select [(ngModel)]="customerItem.roleId" formControlName="roleId">
                    <nz-option *ngFor="let item of dataRole; let i=index;" [nzLabel]="item.name" [nzValue]="item.id"></nz-option>
                  </nz-select>
                </div>
              </div>
            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #modifyCustomerModalFooter>
              <button nz-button nzType="primary" (click)="doSave('modifyCustomer')"><i class="anticon anticon-save"></i>确认修改</button>
              <button nz-button nzType="default" (click)="hideModal('modifyCustomer')"><i class="anticon anticon-close-circle-o"></i>取消</button>
            </ng-template>
          </nz-modal>

        </nz-tab>


        <nz-tab [nzTitle]="operationlogTemplate" (nzClick)="changePanel('operationlog')" *ngIf="commonService.haveMenuPermission('children', '操作日志')">
          <ng-template #operationlogTemplate><i class="anticon anticon-file-text"></i>操作日志</ng-template>
          <form [formGroup]="searchOperationlogForm">
            <div nz-row>
              <div nz-col nzSpan="2" class="span_down right_alignment">
                账号：
              </div>
              <div nz-col nzSpan="3">
                <input nz-input maxlength="32" formControlName="username" placeholder="输入账号" nzSize="default">
              </div>

              <div nz-col nzSpan="2" class="span_down right_alignment">
                姓名：
              </div>
              <div nz-col nzSpan="2" class="span_down">
                <input nz-input maxlength="32" formControlName="realname" placeholder="输入姓名" nzSize="default">
              </div>

              <div nz-col nzSpan="3" class="span_down right_alignment">
                查询日期范围：
              </div>
              <div nz-col nzSpan="7" class="span_down spacing right_alignment">
                <nz-range-picker formControlName="date" [nzFormat]="'yyyy-MM-dd'" [nzShowToday]="true" ngModel [nzRanges]="commonService.dateSearch" (ngModelChange)="onChange($event, 'operationlog')"></nz-range-picker>
              </div>

              <div nz-col nzSpan="2" class="span_down right_alignment">
                角色名称：
              </div>
              <div nz-col nzSpan="3">
                <nz-select [ngModel]="''" formControlName="role_id">
                  <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                  <nz-option *ngFor="let item of dataRole; let i=index;" [nzLabel]="item.name" [nzValue]="item.id"></nz-option>
                </nz-select>
              </div>
            </div>

            <div nz-row>
              <div nz-col nzSpan="2" class="span_down right_alignment">
                一级菜单：
              </div>
              <div nz-col nzSpan="4">
                <nz-select [ngModel]="''" formControlName="op_category">
                  <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                  <nz-option *ngFor="let item of dataResource; let i=index;" [nzLabel]="item.name" [nzValue]="item.name"></nz-option>
                </nz-select>
              </div>
              <div nz-col nzSpan="2" class="span_down right_alignment">
                二级菜单：
              </div>
              <div nz-col nzSpan="5">
                <nz-select [ngModel]="''" formControlName="op_page">
                  <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                  <nz-option *ngFor="let item of dataResourceChildren; let i=index;" [nzLabel]="item.name" [nzValue]="item.name"></nz-option>
                </nz-select>
              </div>

              <div nz-col nzSpan="3" class="span_down right_alignment">
                <label nz-checkbox [(nzChecked)]="unCheckVisit" formControlName="unCheckVisit">不看-访问</label><br>
              </div>
              <div nz-col nzSpan="5"></div>

              <div nz-col nzSpan="3">
                <button nz-button nzType="primary" (click)="loadData('operationlog')" style="margin-right: 10px;"><i class="anticon anticon-search"></i>查询</button>
              </div>
            </div>
          </form>

          <nz-table nzBordered #rowSelectionOperationlogTable [nzData]="dataOperationlog" [nzSimple]="true" *ngIf="!isSpinning">
            <thead>
              <tr>
                <th>序号</th>
                <th>账号</th>
                <th>员工姓名</th>
                <th>IP</th>
                <th>日期</th>
                <th>时间</th>
                <th>角色</th>
                <th>一级菜单</th>
                <th>二级菜单</th>
                <th>行为</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of rowSelectionOperationlogTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.opUsername}}</td>
                <td>{{data.opRealname}}</td>
                <td>{{data.opIp}}</td>
                <td>{{data.opTime | date:'yyyy-MM-dd'}}</td>
                <td>{{data.opTime | date:'HH:mm:ss'}}</td>
                <td>{{data.roleName}}</td>
                <td>{{data.opCategoryName}}</td>
                <td>{{data.opPageName}}</td>
                <td>{{data.opName}}</td>
              </tr>
            </tbody>
          </nz-table>
          <div class="spin" *ngIf="isSpinning">
            <nz-spin [nzSize]="'large'"></nz-spin>
          </div>

        </nz-tab>

        <nz-tab [nzTitle]="navConfigTemplate" (nzClick)="changePanel('navConfig')" *ngIf="commonService.haveMenuPermission('children', '导航配置')">
          <ng-template #navConfigTemplate><i class="anticon anticon-schedule"></i>导航页配置</ng-template>
          <div nz-row>
            <div nz-col nzSpan="21"></div>
            <div nz-col nzSpan="3">
              <button nz-button nzType="primary" (click)="showModal('addNavConfig', '')"><i class="anticon anticon-file-add"></i>新增类别</button>
            </div>
          </div>
          <nz-table nzBordered #rowNavConfigTable [nzData]="dataNavConfig" [nzSimple]="true" *ngIf="!isSpinning">
            <thead>
              <tr>
                <th>序号</th>
                <th>类别名称</th>
                <th>类别排序</th>
                <th>启用状态</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of rowNavConfigTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.name}}</td>
                <td>{{data.order}}</td>
                <td>
                  <nz-form-item>
                    <nz-form-control>
                      <nz-switch [(ngModel)]="data.enable" (click)="clickSwitch(data, 'navConfig')"></nz-switch>
                    </nz-form-control>
                  </nz-form-item>
                </td>
                <td>
                  <button nz-button nzType="primary" (click)="showModal('modifyNavConfig', data)" style="margin-right: 10px;"><i class="anticon anticon-form"></i>编辑</button>
                  <button nz-button nzType="primary" (click)="showModal('deleteNavConfig', data)"><i class="anticon anticon-delete"></i>删除</button>
                </td>
              </tr>
            </tbody>
          </nz-table>
          <div class="spin" *ngIf="isSpinning">
            <nz-spin [nzSize]="'large'"></nz-spin>
          </div>

          <nz-modal [(nzVisible)]="visiable.addNavConfig" nzWidth="1350" nzTitle="新增类别" [nzFooter]="addNavConfigModalFooter" (nzOnCancel)="hideModal('addNavConfig')" nzMaskClosable="false">
            <div nz-row>
              <div nz-col nzSpan="3" class="span_down spacing right_alignment">类别名称：</div>
              <div nz-col nzSpan="6" class="span_down">
                <input nz-input [(ngModel)]="navConfigItem.name" placeholder="请输入名称" nzSize="default">
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="3" class="span_down spacing right_alignment">类别排序：</div>
              <div nz-col nzSpan="6">
                <input nz-input [(ngModel)]="navConfigItem.order" placeholder="请输入类别排序" nzSize="default">
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="3" class="span_down right_alignment">icon配置：</div>
              <div nz-col nzSpan="21" class="span_down">
                <nz-upload [(nzFileList)]="navConfigItem.fileList" nzMultiple [nzBeforeUpload]="beforeUpload">
                  <button nz-button nzType="primary" (click)="beforeUploadBut('list')">
                    <i class="anticon anticon-upload"></i><span>上传文件</span>
                  </button>
                  &nbsp;&nbsp;建议尺寸：50X50
                </nz-upload>
              </div>
            </div>
            <div nz-row *ngIf="navConfigItem.fileList.length === 1">
              <div nz-col nzSpan="3"></div>
              <div nz-col nzSpan="21">
                <img *ngIf="navConfigItem.iconFileId" [src]="'http://account-center-test.chewrobot.com/api/shortcut/resources/icons/' + navConfigItem.iconFileId" class="image-panel">
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="3" class="span_down right_alignment">网址配置：</div>
              <div nz-col nzSpan="3">icon</div>
              <div nz-col nzSpan="3">名称</div>
              <div nz-col nzSpan="4">链接</div>
              <div nz-col nzSpan="4">描述</div>
              <div nz-col nzSpan="4">排序</div>
              <div nz-col nzSpan="3">
                <button nz-button nzType="primary" (click)="onChange($event, 'addNavConfigItem')"><i class="anticon anticon-file-add"></i>添加</button>
              </div>
            </div>
            <div nz-row *ngFor="let data of navConfigItem.elements; let i=index;">
              <div nz-col nzSpan="3"></div>
              <div nz-col nzSpan="3">
                <nz-upload [(nzFileList)]="data.fileList" nzMultiple [nzBeforeUpload]="beforeUpload">
                  <button nz-button nzType="primary" (click)="beforeUploadBut(i + '')">
                    <i class="anticon anticon-upload"></i><span>上传文件</span>
                  </button>
                  <br>建议尺寸：50X50<br>
                </nz-upload>
                <div *ngIf="data.fileList.length === 1">
                  <img [src]="'http://account-center-test.chewrobot.com/api/shortcut/resources/icons/' + data.iconFileId" class="image-panel">
                </div>
              </div>
              <div nz-col nzSpan="3">
                <input nz-input [(ngModel)]="data.name" placeholder="请输入名称" nzSize="default">
              </div>
              <div nz-col nzSpan="4">
                <input nz-input [(ngModel)]="data.data" placeholder="请输入要跳转的网址链接" nzSize="default">
              </div>
              <div nz-col nzSpan="4">
                <input nz-input [(ngModel)]="data.description" placeholder="请输入对网址的描述" nzSize="default">
              </div>
              <div nz-col nzSpan="4">
                <input nz-input [(ngModel)]="data.sort" placeholder="请输入排序" nzSize="default">
              </div>
              <div nz-col nzSpan="3" *ngIf="i !== 0">
                <button nz-button nzType="primary" (click)="onChange(i, 'removeNavConfigItem')"><i class="anticon anticon-file-add"></i>删除</button>
              </div>
            </div>
            <ng-template #addNavConfigModalFooter>
              <button nz-button nzType="primary" (click)="doSave('addNavConfig')"><i class="anticon anticon-save"></i>保存</button>
              <button nz-button nzType="default" (click)="hideModal('addNavConfig')"><i class="anticon anticon-close-circle-o"></i>取消</button>
            </ng-template>
          </nz-modal>

          <nz-modal [(nzVisible)]="visiable.modifyNavConfig" nzWidth="1350" nzTitle="修改类别" [nzFooter]="modifyNavConfigModalFooter" (nzOnCancel)="hideModal('modifyNavConfig')" nzMaskClosable="false">
            <div nz-row>
              <div nz-col nzSpan="3" class="span_down spacing right_alignment">类别名称：</div>
              <div nz-col nzSpan="6" class="span_down">
                <input nz-input [(ngModel)]="navConfigItem.name" placeholder="请输入名称" nzSize="default">
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="3" class="span_down spacing right_alignment">类别排序：</div>
              <div nz-col nzSpan="6">
                <input nz-input [(ngModel)]="navConfigItem.order" placeholder="请输入类别排序" nzSize="default">
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="3" class="span_down right_alignment">icon配置：</div>
              <div nz-col nzSpan="21" class="span_down">
                <nz-upload [(nzFileList)]="navConfigItem.fileList" nzMultiple [nzBeforeUpload]="beforeUpload">
                  <button nz-button nzType="primary" (click)="beforeUploadBut('list')">
                    <i class="anticon anticon-upload"></i><span>上传文件</span>
                  </button>
                  &nbsp;&nbsp;建议尺寸：50X50
                </nz-upload>
              </div>
            </div>
            <div nz-row *ngIf="navConfigItem.fileList.length == 1">
              <div nz-col nzSpan="3"></div>
              <div nz-col nzSpan="21">
                <img *ngIf="navConfigItem.iconFileId" [src]="'http://account-center-test.chewrobot.com/api/shortcut/resources/icons/' + navConfigItem.iconFileId" class="image-panel">
              </div>
            </div>
            <div nz-row>
              <div nz-col nzSpan="3" class="span_down right_alignment">网址配置：</div>
              <div nz-col nzSpan="3">icon</div>
              <div nz-col nzSpan="3">名称</div>
              <div nz-col nzSpan="4">链接</div>
              <div nz-col nzSpan="4">描述</div>
              <div nz-col nzSpan="4">排序</div>
              <div nz-col nzSpan="3">
                <button nz-button nzType="primary" (click)="onChange($event, 'addNavConfigItem')"><i class="anticon anticon-file-add"></i>添加</button>
              </div>
            </div>
            <div nz-row *ngFor="let data of navConfigItem.elements; let i=index;">
              <div nz-col nzSpan="3"></div>
              <div nz-col nzSpan="3">
                <nz-upload [(nzFileList)]="data.fileList" nzMultiple [nzBeforeUpload]="beforeUpload">
                  <button nz-button nzType="primary" (click)="beforeUploadBut(i + '')">
                    <i class="anticon anticon-upload"></i><span>上传文件</span>
                  </button>
                  <br>建议尺寸：50X50<br>
                </nz-upload>
                <div *ngIf="data.fileList.length === 1">
                  <img [src]="'http://account-center-test.chewrobot.com/api/shortcut/resources/icons/' + data.iconFileId" class="image-panel">
                </div>
              </div>
              <div nz-col nzSpan="3">
                <input nz-input [(ngModel)]="data.name" placeholder="请输入名称" nzSize="default">
              </div>
              <div nz-col nzSpan="4">
                <input nz-input [(ngModel)]="data.data" placeholder="请输入要跳转的网址链接" nzSize="default">
              </div>
              <div nz-col nzSpan="4">
                <input nz-input [(ngModel)]="data.description" placeholder="请输入对网址的描述" nzSize="default">
              </div>
              <div nz-col nzSpan="4">
                <input nz-input [(ngModel)]="data.sort" placeholder="请输入排序" nzSize="default">
              </div>
              <div nz-col nzSpan="3" *ngIf="i !== 0">
                <button nz-button nzType="primary" (click)="onChange(i, 'removeNavConfigItem')"><i class="anticon anticon-file-add"></i>删除</button>
              </div>
            </div>
            <ng-template #modifyNavConfigModalFooter>
              <button nz-button nzType="primary" (click)="doSave('modifyNavConfig')"><i class="anticon anticon-save"></i>保存</button>
              <button nz-button nzType="default" (click)="hideModal('modifyNavConfig')"><i class="anticon anticon-close-circle-o"></i>取消</button>
            </ng-template>
          </nz-modal>

        </nz-tab>

      </nz-tabset>
    </nz-card-tab>
  </nz-card>
</div>
