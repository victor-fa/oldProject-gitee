<app-left-nav></app-left-nav>
<div class="content" [ngStyle]="{'left': !commonService.isLeftNavClose ? 'calc(240px)' : 'calc(80px)','width': !commonService.isLeftNavClose ? 'calc(100% - 240px)' : 'calc(100% - 80px)'}">
  <nz-card style="width: 100%;">
    <nz-card-tab>
      <nz-tabset nzSize="large">
        <nz-tab nzTitle="内容发布" (nzClick)="changePanel('content')">
          <div nz-row class="search_panel">
            <div nz-col nzSpan="21"></div>
            <div nz-col nzSpan="3">
              <button nz-button nzType="primary" (click)="showAddModal('content')"><i class="anticon anticon-file-add"></i>新增内容</button>
            </div>
          </div>
          <nz-table #contentTable [nzData]="dataContent">
            <thead>
              <tr>
                <th nzWidth="20px">序号</th>
                <th nzWidth="20px">缩略图</th>
                <th nzWidth="20px">标题</th>
                <th nzWidth="20px">类型</th>
                <th nzWidth="20px">阅读量</th>
                <th nzWidth="20px">链接</th>
                <th nzWidth="20px">发布人</th>
                <th nzWidth="20px">状态</th>
                <th nzWidth="20px">发布时间</th>
                <th nzWidth="20px">操作</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of contentTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td><img [src]="'http://account-center-test.chewrobot.com/api/cms/notices/thumbnails/' + data.thumbnail" class="thumbnail"></td>
                <td>{{data.title}}</td>
                <td>{{data.type == 'SKILL' ? '使用技巧' : data.type == 'OPERATION' ? '运营活动' : data.type == 'OCCURRENCE' ? '小悟动态' : '系统消息'}}</td>
                <td>{{data.readingAmount}}</td>
                <td style="max-width: 110px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">{{data.url === 'null' ? '' : data.url }}</td>
                <td>{{data.pseudonym}}</td>
                <td>{{now >= data.publishTime ? '已发布' : '未发布'}}</td>
                <td>{{data.publishTime | date:'yyyy-MM-dd HH:mm:ss' }}</td>
                <td>
                  <button nz-button nzType="primary" (click)="showModifyModal(data, 'content')" style="margin-right: 10px;"><i
                      class="anticon anticon-form"></i>修改</button>
                  <button nz-button nzType="primary" (click)="showDeleteModal(data, 'content')" style="margin-right: 10px;"><i
                      class="anticon anticon-delete"></i>删除</button>
                  <button nz-button nzType="primary" (click)="doPreviewContent(data)" style="margin-right: 10px;"><i
                      class="anticon anticon-play-circle"></i>预览</button>
                </td>
              </tr>
            </tbody>
          </nz-table>

          <!-- 弹框 —— 新增 —— 新增内容 -->
          <nz-modal [(nzVisible)]="isAddContentVisible" nzWidth="1150" nzTitle="新增内容" [nzFooter]="addContentModalFooter" nzClosable="false">
            <form [formGroup]="addContentForm">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">*标题：</div>
                <div nz-col nzSpan="22">
                  <input nz-input maxlength="25" formControlName="title" [(ngModel)]="emptyAdd[0]" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入标题" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">*类型：</div>
                <div nz-col nzSpan="22">
                  <nz-select [ngModel]="''" formControlName="type" [(ngModel)]="emptyAdd[1]">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'使用技巧'" [nzValue]="'SKILL'"></nz-option>
                    <nz-option required [nzLabel]="'运营活动'" [nzValue]="'OPERATION'"></nz-option>
                    <nz-option required [nzLabel]="'小悟动态'" [nzValue]="'OCCURRENCE'"></nz-option>
                    <nz-option required [nzLabel]="'系统消息'" [nzValue]="'SYSTEM_MESSAGE'"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">url：</div>
                <div nz-col nzSpan="22">
                  <input nz-input formControlName="url" [(ngModel)]="emptyAdd[2]" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="若url不为空，则默认使用url访问文章详情" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">*摘要：</div>
                <div nz-col nzSpan="22">
                  <textarea rows="4" nz-input formControlName="abstractContent" [(ngModel)]="emptyAdd[3]" maxlength="50" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入摘要" nzSize="default"></textarea>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment"><i class="anticon anticon-add"></i>缩略图：</div>
                <div nz-col nzSpan="22">
                  <nz-upload [(nzFileList)]="fileList" [nzShowButton]="fileList.length < 1" nzMultiple [nzBeforeUpload]="beforeUpload">
                    <button nz-button>
                      <i class="anticon anticon-upload"></i><span>选择文件</span>
                    </button>
                  </nz-upload>
                </div>
              </div>
              <div nz-row class="search_panel" *ngIf="fileList.length == 1">
                <div nz-col nzSpan="2" class="span_down right_alignment"></div>
                <div nz-col nzSpan="22">
                  <img *ngIf="imageUrl" [src]="showImageUrl" class="image-panel">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">*发布时间：</div>
                <div nz-col nzSpan="22">
                  <nz-date-picker nzShowTime formControlName="publishTime" [(ngModel)]="emptyAdd[5]" required [nzFormat]="'yyyy-MM-dd HH:mm'" nzPlaceHolder="请输入发布时间"></nz-date-picker>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">*发布人：</div>
                <div nz-col nzSpan="22">
                  <input nz-input maxlength="20" formControlName="pseudonym" [(ngModel)]="emptyAdd[6]" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入发布人" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment"></div>
                <div nz-col nzSpan="22">
                  <quill-editor formControlName="content" [(ngModel)]="emptyAdd[4]" [modules]="config" [style]="{height: '350px'}"></quill-editor>
                </div>
              </div>
            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #addContentModalFooter>
              <button nz-button nzType="primary" (click)="doSave('content')">保存</button>
              <button nz-button nzType="primary" (click)="doPreviewContentAdd()">预览</button>
              <button nz-button nzType="default" (click)="hideAddModal('content')">取消</button>
            </ng-template>
          </nz-modal>

          <!-- 弹框 —— 修改 —— 修改内容 -->
          <nz-modal [(nzVisible)]="isModifyContentVisible" nzWidth="1150" nzTitle="修改内容" [nzFooter]="modifyContentModalFooter"
            nzClosable="false">
            <form [formGroup]="modifyContentForm">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">*标题：</div>
                <div nz-col nzSpan="22">
                  <input nz-input maxlength="25" formControlName="title" [(ngModel)]="contentDate.title" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入标题" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">*类型：</div>
                <div nz-col nzSpan="22">
                  <nz-select [ngModel]="contentDate.type" formControlName="type">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'使用技巧'" [nzValue]="'SKILL'"></nz-option>
                    <nz-option required [nzLabel]="'运营活动'" [nzValue]="'OPERATION'"></nz-option>
                    <nz-option required [nzLabel]="'小悟动态'" [nzValue]="'OCCURRENCE'"></nz-option>
                    <nz-option required [nzLabel]="'系统消息'" [nzValue]="'SYSTEM_MESSAGE'"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">url：</div>
                <div nz-col nzSpan="22">
                  <input nz-input formControlName="url" [(ngModel)]="contentDate.url" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="若url不为空，则默认使用url访问文章详情" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="spthumbnailan_down right_alignment">*摘要：</div>
                <div nz-col nzSpan="22">
                  <textarea rows="4" nz-input formControlName="abstractContent" [(ngModel)]="contentDate.abstractContent" maxlength="64" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入摘要" nzSize="default"></textarea>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment"><i class="anticon anticon-add"></i>缩略图：</div>
                <div nz-col nzSpan="22">
                  <nz-upload [(nzFileList)]="fileList" [nzShowButton]="fileList.length < 1" nzMultiple [nzBeforeUpload]="beforeUpload">
                    <button nz-button>
                      <i class="anticon anticon-upload"></i><span>选择文件</span>
                    </button>
                  </nz-upload>
                </div>
              </div>
              <div nz-row class="search_panel" *ngIf="fileList.length === 1">
                <div nz-col nzSpan="2" class="span_down right_alignment"></div>
                <div nz-col nzSpan="22">
                  <img [src]="showImageUrl" class="image-panel">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">*发布时间：</div>
                <div nz-col nzSpan="22">
                  <nz-date-picker nzShowTime formControlName="publishTime" [(ngModel)]="contentDate.publishTime" required [nzFormat]="'yyyy-MM-dd HH:mm'" nzPlaceHolder="请输入发布时间"></nz-date-picker>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment">*发布人：</div>
                <div nz-col nzSpan="22">
                  <input nz-input maxlength="20" formControlName="pseudonym" [(ngModel)]="contentDate.pseudonym" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入发布人" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2" class="span_down right_alignment"></div>
                <div nz-col nzSpan="22">
                  <quill-editor formControlName="content" [(ngModel)]="contentDate.content" [modules]="config" [style]="{height: '350px'}"></quill-editor>
                </div>
              </div>
            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #modifyContentModalFooter>
              <button nz-button nzType="primary" (click)="doModify('content')">保存</button>
              <button nz-button nzType="primary" (click)="doPreviewContentModify()">预览</button>
              <button nz-button nzType="default" (click)="hideModifyModal('content')">取消</button>
            </ng-template>
          </nz-modal>

        </nz-tab>

        <nz-tab nzTitle="开屏启动" (nzClick)="changePanel('screen')">
          <div nz-row class="search_panel">
            <div nz-col nzSpan="21"></div>
            <div nz-col nzSpan="3">
              <button nz-button nzType="primary" (click)="showAddModal('screen')"><i class="anticon anticon-file-add"></i>新增开屏</button>
            </div>
          </div>
          <nz-table #screenTable [nzData]="dataScreen">
            <thead>
              <tr>
                <th nzWidth="20px">序号</th>
                <th nzWidth="20px">持续时间设置</th>
                <th nzWidth="20px">跳过状态</th>
                <th nzWidth="20px">链接跳转状态</th>
                <th nzWidth="20px">APP标识</th>
                <th nzWidth="20px">开屏图片</th>
                <th nzWidth="20px">启用状态</th>
                <th nzWidth="20px">操作</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of screenTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.duration}}s</td>
                <td>{{data.skip === true ? '可跳过' : '不可跳过' }}</td>
                <td>{{data.site === 1 ? '个人中心' : data.site === 2 ? '个人中心 > 设置' : data.site === 3 ? '个人中心 > 我的订单' : data.site === 4 ? '个人中心 > 常用信息' : data.site === 5 ? '个人中心 > 我的账户 > 充值' : data.site === 6 ? '个人中心 > 我的账户 > 设置小额免密' : data.site === 7 ? '个人中心 > 联系我们 > 我的建议' : '对话流 > 帮助'}}</td>
                <td>{{data.url ? '可跳转' : '不可跳转'}}</td>
                <td><img [src]="'http://account-center-test.chewrobot.com/api/cms/start-page-ads/images/' + data.image" class="thumbnail"></td>
                <td>
                  <nz-form-item>
                    <nz-form-control>
                      <nz-switch [(ngModel)]="data.enabled" (click)="clickSwitch(data.id, data.enabled, 'screen')"></nz-switch>
                    </nz-form-control>
                  </nz-form-item>
                </td>
                <td>
                  <button nz-button nzType="primary" (click)="showModifyModal(data, 'screen')" style="margin-right: 10px;"><i
                      class="anticon anticon-form"></i>修改</button>
                  <button nz-button nzType="primary" (click)="showDeleteModal(data, 'screen')" style="margin-right: 10px;"><i
                      class="anticon anticon-delete"></i>删除</button>
                </td>
              </tr>
            </tbody>
          </nz-table>

          <!-- 弹框 —— 新增 —— 新增开屏 -->
          <nz-modal [(nzVisible)]="isAddScreenVisible" nzTitle="新增开屏" [nzFooter]="addScreenModalFooter" (nzOnCancel)="hideAddModal('screen')">
            <form [formGroup]="addScreenForm">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">持续时间：</div>
                <div nz-col nzSpan="12">
                  <input nz-input maxlength="2" formControlName="duration" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入持续时间（单位：s）" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">APP标识：</div>
                <div nz-col nzSpan="12">
                  <nz-select formControlName="site" [(ngModel)]="emptyAdd[1]">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'个人中心'" [nzValue]="1"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 设置'" [nzValue]="2"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的订单'" [nzValue]="3"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 常用信息'" [nzValue]="4"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 充值'" [nzValue]="5"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 设置小额免密'" [nzValue]="6"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 联系我们 > 我的建议'" [nzValue]="7"></nz-option>
                    <nz-option required [nzLabel]="'对话流 > 帮助'" [nzValue]="8"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">跳过状态：</div>
                <div nz-col nzSpan="12">
                  <nz-select formControlName="skip" [(ngModel)]="emptyAdd[2]">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'可跳过'" [nzValue]="'true'"></nz-option>
                    <nz-option required [nzLabel]="'不可跳过'" [nzValue]="'false'"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">链接跳转状态：</div>
                <div nz-col nzSpan="12">
                  <nz-select formControlName="jump" [(ngModel)]="emptyAdd[3]">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'不跳转'" [nzValue]="'DISABLED'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到网页'" [nzValue]="'HTML'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到APP'" [nzValue]="'APP'"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">链接地址：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="url" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入链接地址" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment"><i class="anticon anticon-add"></i>开屏图片：</div>
                <div nz-col nzSpan="12">
                  <nz-upload [(nzFileList)]="fileList" [nzShowButton]="fileList.length < 1" nzMultiple [nzBeforeUpload]="beforeUpload">
                    <button nz-button>
                      <i class="anticon anticon-upload"></i><span>选择文件</span>
                    </button>
                  </nz-upload>
                </div>
              </div>
              <div nz-row class="search_panel" *ngIf="fileList.length == 1">
                <div nz-col nzSpan="8" class="span_down right_alignment"></div>
                <div nz-col nzSpan="12">
                  <img *ngIf="imageUrl" [src]="showImageUrl" class="image-panel">
                </div>
              </div>
            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #addScreenModalFooter>
              <button nz-button nzType="primary" (click)="doSave('screen')">保存</button>
              <button nz-button nzType="default" (click)="hideAddModal('screen')">取消</button>
            </ng-template>
          </nz-modal>

          <!-- 弹框 —— 修改 —— 修改开屏 -->
          <nz-modal [(nzVisible)]="isModifyScreenVisible" nzTitle="修改开屏" [nzFooter]="modifyScreenModalFooter" (nzOnCancel)="hideModifyModal('screen')">
            <form [formGroup]="modifyScreenForm">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">持续时间：</div>
                <div nz-col nzSpan="12">
                  <input nz-input maxlength="2" formControlName="duration" [ngModel]="screenDate.duration" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入持续时间" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">APP标识：</div>
                <div nz-col nzSpan="12">
                  <nz-select [ngModel]="screenDate.site" formControlName="site">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'个人中心'" [nzValue]="1"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 设置'" [nzValue]="2"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的订单'" [nzValue]="3"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 常用信息'" [nzValue]="4"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 充值'" [nzValue]="5"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 设置小额免密'" [nzValue]="6"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 联系我们 > 我的建议'" [nzValue]="7"></nz-option>
                    <nz-option required [nzLabel]="'对话流 > 帮助'" [nzValue]="8"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">跳过状态：</div>
                <div nz-col nzSpan="12">
                  <nz-select [ngModel]="screenDate.jump" formControlName="jump">
                    <nz-option required [nzLabel]="'不跳转'" [nzValue]="'DISABLED'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到网页'" [nzValue]="'HTML'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到APP'" [nzValue]="'APP'"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">链接跳转状态：</div>
                <div nz-col nzSpan="12">
                  <nz-select [ngModel]="screenDate.skip" formControlName="skip">
                    <nz-option required [nzLabel]="'可跳过'" [nzValue]="true"></nz-option>
                    <nz-option required [nzLabel]="'不可跳过'" [nzValue]="false"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">链接地址：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="url" [ngModel]="screenDate.url" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入链接地址" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment"><i class="anticon anticon-add"></i>开屏图片：</div>
                <div nz-col nzSpan="12">
                  <nz-upload [(nzFileList)]="fileList" [nzShowButton]="fileList.length < 1" nzMultiple [nzBeforeUpload]="beforeUpload">
                    <button nz-button>
                      <i class="anticon anticon-upload"></i><span>选择文件</span>
                    </button>
                  </nz-upload>
                </div>
              </div>
              <div nz-row class="search_panel" *ngIf="fileList.length === 1">
                <div nz-col nzSpan="8" class="span_down right_alignment"></div>
                <div nz-col nzSpan="12">
                  <img [src]="showImageUrl" class="image-panel">
                </div>
              </div>
            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #modifyScreenModalFooter>
              <button nz-button nzType="primary" (click)="doModify('screen')">保存</button>
              <button nz-button nzType="default" (click)="hideModifyModal('screen')">取消</button>
            </ng-template>
          </nz-modal>

        </nz-tab>

        <nz-tab nzTitle="首页弹框" (nzClick)="changePanel('open')">
          <div nz-row class="search_panel">
            <div nz-col nzSpan="21"></div>
            <div nz-col nzSpan="3">
              <button nz-button nzType="primary" (click)="showAddModal('open')"><i class="anticon anticon-file-add"></i>新增弹框</button>
            </div>
          </div>
          <nz-table #openTable [nzData]="dataOpen">
            <thead>
              <tr>
                <th nzWidth="20px">序号</th>
                <th nzWidth="20px">跳转位置</th>
                <th nzWidth="20px">链接跳转状态</th>
                <th nzWidth="20px">排序状态</th>
                <th nzWidth="20px">APP标识</th>
                <th nzWidth="20px">弹框图片</th>
                <th nzWidth="20px">启用状态</th>
                <th nzWidth="20px">操作</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of openTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.jump === 'DISABLED'? '不可跳转' : data.jump === 'html' ? '端内跳端外' : '端外跳端内'}}</td>
                <td>{{data.url ? '可跳转' : '不可跳转'}}</td>
                <td>{{data.order}}</td>
                <td>{{data.site === 1 ? '个人中心' : data.site === 2 ? '个人中心 > 设置' : data.site === 3 ? '个人中心 > 我的订单' : data.site === 4 ? '个人中心 > 常用信息' : data.site === 5 ? '个人中心 > 我的账户 > 充值' : data.site === 6 ? '个人中心 > 我的账户 > 设置小额免密' : data.site === 7 ? '个人中心 > 联系我们 > 我的建议' : '对话流 > 帮助'}}</td>
                <td><img [src]="'http://account-center-test.chewrobot.com/api/cms/main-page-ads/images/' + data.image" class="thumbnail"></td>
                <td>
                  <nz-form-item>
                    <nz-form-control>
                      <nz-switch [(ngModel)]="data.enabled" (click)="clickSwitch(data.id, data.enabled, 'open')"></nz-switch>
                    </nz-form-control>
                  </nz-form-item>
                </td>
                <td>
                  <button nz-button nzType="primary" (click)="showModifyModal(data, 'open')" style="margin-right: 10px;"><i
                      class="anticon anticon-form"></i>修改</button>
                  <button nz-button nzType="primary" (click)="showDeleteModal(data, 'open')" style="margin-right: 10px;"><i
                      class="anticon anticon-delete"></i>删除</button>
                </td>
              </tr>
            </tbody>
          </nz-table>

          <!-- 弹框 —— 新增 —— 新增弹框 -->
          <nz-modal [(nzVisible)]="isAddOpenVisible" nzTitle="新增弹框" [nzFooter]="addOpenModalFooter" (nzOnCancel)="hideAddModal('open')">
            <form [formGroup]="addOpenForm">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">APP标识：</div>
                <div nz-col nzSpan="12">
                  <nz-select formControlName="site" [(ngModel)]="emptyAdd[1]">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'个人中心'" [nzValue]="1"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 设置'" [nzValue]="2"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的订单'" [nzValue]="3"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 常用信息'" [nzValue]="4"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 充值'" [nzValue]="5"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 设置小额免密'" [nzValue]="6"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 联系我们 > 我的建议'" [nzValue]="7"></nz-option>
                    <nz-option required [nzLabel]="'对话流 > 帮助'" [nzValue]="8"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">跳转位置：</div>
                <div nz-col nzSpan="12">
                  <nz-select formControlName="jump" [(ngModel)]="emptyAdd[2]">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'不跳转'" [nzValue]="'DISABLED'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到网页'" [nzValue]="'HTML'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到APP'" [nzValue]="'APP'"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">链接地址：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="url" [(ngModel)]="openDate.url" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入链接地址" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">排序状态：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="order" [(ngModel)]="openDate.order" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入排序状态" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment"><i class="anticon anticon-add"></i>弹框图片：</div>
                <div nz-col nzSpan="12">
                  <nz-upload [(nzFileList)]="fileList" [nzShowButton]="fileList.length < 1" nzMultiple [nzBeforeUpload]="beforeUpload">
                    <button nz-button>
                      <i class="anticon anticon-upload"></i><span>选择文件</span>
                    </button>
                  </nz-upload>
                </div>
              </div>
              <div nz-row class="search_panel" *ngIf="fileList.length == 1">
                <div nz-col nzSpan="8" class="span_down right_alignment"></div>
                <div nz-col nzSpan="12">
                  <img *ngIf="imageUrl" [src]="showImageUrl" class="image-panel">
                </div>
              </div>
            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #addOpenModalFooter>
              <button nz-button nzType="primary" (click)="doSave('open')">保存</button>
              <button nz-button nzType="default" (click)="hideAddModal('open')">取消</button>
            </ng-template>
          </nz-modal>

          <!-- 弹框 —— 修改 —— 修改弹框 -->
          <nz-modal [(nzVisible)]="isModifyOpenVisible" nzTitle="修改弹框" [nzFooter]="modifyOpenModalFooter" (nzOnCancel)="hideModifyModal('open')">
            <form [formGroup]="modifyOpenForm">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">APP标识：</div>
                <div nz-col nzSpan="12">
                  <nz-select [ngModel]="openDate.site" formControlName="site">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'个人中心'" [nzValue]="1"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 设置'" [nzValue]="2"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的订单'" [nzValue]="3"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 常用信息'" [nzValue]="4"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 充值'" [nzValue]="5"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 设置小额免密'" [nzValue]="6"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 联系我们 > 我的建议'" [nzValue]="7"></nz-option>
                    <nz-option required [nzLabel]="'对话流 > 帮助'" [nzValue]="8"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">跳转位置：</div>
                <div nz-col nzSpan="12">
                  <nz-select [ngModel]="openDate.jump" formControlName="jump">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'不跳转'" [nzValue]="'DISABLED'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到网页'" [nzValue]="'HTML'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到APP'" [nzValue]="'APP'"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">链接地址：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="url" [ngModel]="openDate.url" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入链接地址" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">排序状态：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="order" [ngModel]="openDate.order" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入排序状态" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment"><i class="anticon anticon-add"></i>弹框图片：</div>
                <div nz-col nzSpan="12">
                  <nz-upload [(nzFileList)]="fileList" [nzShowButton]="fileList.length < 1" nzMultiple [nzBeforeUpload]="beforeUpload">
                    <button nz-button>
                      <i class="anticon anticon-upload"></i><span>选择文件</span>
                    </button>
                  </nz-upload>
                </div>
              </div>
              <div nz-row class="search_panel" *ngIf="fileList.length === 1">
                <div nz-col nzSpan="8" class="span_down right_alignment"></div>
                <div nz-col nzSpan="12">
                  <img [src]="showImageUrl" class="image-panel">
                </div>
              </div>
            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #modifyOpenModalFooter>
              <button nz-button nzType="primary" (click)="doModify('open')">保存</button>
              <button nz-button nzType="default" (click)="hideModifyModal('open')">取消</button>
            </ng-template>
          </nz-modal>

        </nz-tab>

        <nz-tab nzTitle="轮播图" (nzClick)="changePanel('banner')">
          <div nz-row class="search_panel">
            <div nz-col nzSpan="21"></div>
            <div nz-col nzSpan="3">
              <button nz-button nzType="primary" (click)="showAddModal('banner')"><i class="anticon anticon-file-add"></i>新增轮播图</button>
            </div>
          </div>
          <nz-table #bannerTable [nzData]="dataBanner">
            <thead>
              <tr>
                <th nzWidth="20px">序号</th>
                <th nzWidth="20px">轮播图标题</th>
                <th nzWidth="20px">跳转位置</th>
                <th nzWidth="20px">链接跳转状态</th>
                <th nzWidth="20px">排序状态</th>
                <th nzWidth="20px">APP标识</th>
                <th nzWidth="20px">轮播图片</th>
                <th nzWidth="20px">启用状态</th>
                <th nzWidth="20px">操作</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of bannerTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.title}}</td>
                <td>{{data.jump === 'DISABLED'? '不可跳转' : data.jump === 'html' ? '端内跳端外' : '端外跳端内'}}</td>
                <td>{{data.url ? '可跳转' : '不可跳转'}}</td>
                <td>{{data.order}}</td>
                <td>{{data.site === 1 ? '个人中心' : data.site === 2 ? '个人中心 > 设置' : data.site === 3 ? '个人中心 > 我的订单' : data.site === 4 ? '个人中心 > 常用信息' : data.site === 5 ? '个人中心 > 我的账户 > 充值' : data.site === 6 ? '个人中心 > 我的账户 > 设置小额免密' : data.site === 7 ? '个人中心 > 联系我们 > 我的建议' : '对话流 > 帮助'}}</td>
                <td><img [src]="'http://account-center-test.chewrobot.com/api/cms/banner-ads/images/' + data.image" class="thumbnail"></td>
                <td>
                  <nz-form-item>
                    <nz-form-control>
                      <nz-switch [(ngModel)]="data.enabled" (click)="clickSwitch(data.id, data.enabled, 'banner')"></nz-switch>
                    </nz-form-control>
                  </nz-form-item>
                </td>
                <td>
                  <button nz-button nzType="primary" (click)="showModifyModal(data, 'banner')" style="margin-right: 10px;"><i
                      class="anticon anticon-form"></i>修改</button>
                  <button nz-button nzType="primary" (click)="showDeleteModal(data, 'banner')" style="margin-right: 10px;"><i
                      class="anticon anticon-delete"></i>删除</button>
                </td>
              </tr>
            </tbody>
          </nz-table>

          <!-- 弹框 —— 新增 —— 新增轮播图 -->
          <nz-modal [(nzVisible)]="isAddBannerVisible" nzTitle="新增轮播图" [nzFooter]="addBannerModalFooter" (nzOnCancel)="hideAddModal('banner')">
            <form [formGroup]="addBannerForm">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">轮播图标题：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="title" [(ngModel)]="bannerDate.title" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入轮播图标题" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">APP标识：</div>
                <div nz-col nzSpan="12">
                  <nz-select formControlName="site" [(ngModel)]="emptyAdd[1]">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'个人中心'" [nzValue]="1"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 设置'" [nzValue]="2"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的订单'" [nzValue]="3"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 常用信息'" [nzValue]="4"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 充值'" [nzValue]="5"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 设置小额免密'" [nzValue]="6"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 联系我们 > 我的建议'" [nzValue]="7"></nz-option>
                    <nz-option required [nzLabel]="'对话流 > 帮助'" [nzValue]="8"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">跳转位置：</div>
                <div nz-col nzSpan="12">
                  <nz-select [ngModel]="''" formControlName="jump" [(ngModel)]="emptyAdd[2]">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'不跳转'" [nzValue]="'DISABLED'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到网页'" [nzValue]="'HTML'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到APP'" [nzValue]="'APP'"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">链接地址：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="url" [(ngModel)]="bannerDate.url" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入链接地址" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">排序状态：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="order" [(ngModel)]="bannerDate.order" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入排序状态" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment"><i class="anticon anticon-add"></i>弹框图片：</div>
                <div nz-col nzSpan="12">
                  <nz-upload [(nzFileList)]="fileList" [nzShowButton]="fileList.length < 1" nzMultiple [nzBeforeUpload]="beforeUpload">
                    <button nz-button>
                      <i class="anticon anticon-upload"></i><span>选择文件</span>
                    </button>
                  </nz-upload>
                </div>
              </div>
              <div nz-row class="search_panel" *ngIf="fileList.length == 1">
                <div nz-col nzSpan="8" class="span_down right_alignment"></div>
                <div nz-col nzSpan="12">
                  <img *ngIf="imageUrl" [src]="showImageUrl" class="image-panel">
                </div>
              </div>
            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #addBannerModalFooter>
              <button nz-button nzType="primary" (click)="doSave('banner')">保存</button>
              <button nz-button nzType="default" (click)="hideAddModal('banner')">取消</button>
            </ng-template>
          </nz-modal>

          <!-- 弹框 —— 修改 —— 修改轮播图 -->
          <nz-modal [(nzVisible)]="isModifyBannerVisible" nzTitle="修改轮播图" [nzFooter]="modifyBannerModalFooter" (nzOnCancel)="hideModifyModal('banner')">
            <form [formGroup]="modifyBannerForm">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">轮播图标题：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="title" [(ngModel)]="bannerDate.title" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入轮播图标题" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">APP标识：</div>
                <div nz-col nzSpan="12">
                  <nz-select [ngModel]="bannerDate.site" formControlName="site">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'个人中心'" [nzValue]="1"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 设置'" [nzValue]="2"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的订单'" [nzValue]="3"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 常用信息'" [nzValue]="4"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 充值'" [nzValue]="5"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 我的账户 > 设置小额免密'" [nzValue]="6"></nz-option>
                    <nz-option required [nzLabel]="'个人中心 > 联系我们 > 我的建议'" [nzValue]="7"></nz-option>
                    <nz-option required [nzLabel]="'对话流 > 帮助'" [nzValue]="8"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">跳转位置：</div>
                <div nz-col nzSpan="12">
                  <nz-select [ngModel]="bannerDate.jump" formControlName="jump">
                    <nz-option [nzLabel]="'----无----'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'不跳转'" [nzValue]="'DISABLED'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到网页'" [nzValue]="'HTML'"></nz-option>
                    <nz-option required [nzLabel]="'跳转到APP'" [nzValue]="'APP'"></nz-option>
                  </nz-select>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">链接地址：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="url" [(ngModel)]="bannerDate.url" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入链接地址" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment">排序状态：</div>
                <div nz-col nzSpan="12">
                  <input nz-input formControlName="order" [(ngModel)]="bannerDate.order" onkeyup="this.value=this.value.replace(/(^\s*)|(\s*$)/g,'')"
                    placeholder="请输入排序状态" nzSize="default">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="8" class="span_down right_alignment"><i class="anticon anticon-add"></i>弹框图片：</div>
                <div nz-col nzSpan="12">
                  <nz-upload [(nzFileList)]="fileList" [nzShowButton]="fileList.length < 1" nzMultiple [nzBeforeUpload]="beforeUpload">
                    <button nz-button>
                      <i class="anticon anticon-upload"></i><span>选择文件</span>
                    </button>
                  </nz-upload>
                </div>
              </div>
              <div nz-row class="search_panel" *ngIf="fileList.length === 1">
                <div nz-col nzSpan="8" class="span_down right_alignment"></div>
                <div nz-col nzSpan="12">
                  <img [src]="showImageUrl" class="image-panel">
                </div>
              </div>
            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #modifyBannerModalFooter>
              <button nz-button nzType="primary" (click)="doModify('banner')">保存</button>
              <button nz-button nzType="default" (click)="hideModifyModal('banner')">取消</button>
            </ng-template>
          </nz-modal>

        </nz-tab>

      </nz-tabset>
    </nz-card-tab>
  </nz-card>
</div>
