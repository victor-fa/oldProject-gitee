<app-left-nav></app-left-nav>
<div class="user" [ngStyle]="{'left': !commonService.isLeftNavClose ? 'calc(240px)' : 'calc(80px)','width': !commonService.isLeftNavClose ? 'calc(100% - 240px)' : 'calc(100% - 80px)'}">
  <nz-card style="width: 100%;">
    <nz-card-tab>
      <nz-tabset nzSize="large">
        <nz-tab nzTitle="用户管理" (nzClick)="changePanel('user')" *ngIf="commonService.haveMenuPermission('children', '用户管理')">
          <form [formGroup]="searchUserForm">
            <div nz-row class="search_panel">
              <div nz-col nzSpan="2" class="span_down spacing right_alignment">
                <!-- 用户名： -->
                用户ID：
              </div>
              <div nz-col nzSpan="3">
                <input nz-input formControlName="userName" maxlength="10" placeholder="输入用户名"
                  nzSize="default">
              </div>

              <div nz-col nzSpan="2" class="span_down right_alignment">
                手机号：
              </div>
              <div nz-col nzSpan="3">
                <input nz-input formControlName="phoneNum" maxlength="11" placeholder="输入手机号"
                  nzSize="default">
              </div>

              <div nz-col nzSpan="12">
              </div>

              <div nz-col nzSpan="2">
                <button nz-button nzType="primary" (click)="doSearch('user')"><i class="anticon anticon-search"></i>查询</button>
              </div>
            </div>
          </form>

          <nz-table #rowSelectionUserTable [nzData]="userData" [nzSimple]="true" [(nzPageSize)]="userPageSize" [nzShowPagination]="false" [nzScroll]="{x:'1800px'}">
            <thead>
              <tr>
                <th>序号</th>
                <th>昵称</th>
                <th>用户ID</th>
                <th>是否拉黑</th>
                <th>在系统状态</th><!-- 1.正常 = 成功登录过齐悟前端产品 2.未激活 = 请求了验证码，但是没有登录成功过 3.黑名单 = 被拉入了黑名单 -->
                <th>短信请求次数</th>
                <th>第一次注册时间</th>
                <th>上次登录时间</th>
                <th>手机号</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of rowSelectionUserTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.nickName}}</td>
                <td>{{data.userId}}</td>
                <td>{{data.locked}}</td>
                <td>{{data.status}}</td>
                <td>{{data.sentCount}}</td>
                <td>{{data.createTime | date:'yyyy-MM-dd HH:mm' }}</td>
                <td>{{data.updateTime | date:'yyyy-MM-dd HH:mm' }}</td>
                <td>{{data.userPhone}}</td>
                <td>
                  <button nz-button nzType="primary" *ngIf="data.locked !== '已拉黑'" (click)="showModal('Blacklist', data)" style="margin-right: 10px;">拉黑</button>
                  <button nz-button nzType="primary" *ngIf="data.locked === '已拉黑'" disabled style="margin-right: 10px;">拉黑</button>
                  <button nz-button nzType="primary" (click)="showModal('UserInfo', data)" style="margin-right: 10px;">查看详情</button>
                </td>
              </tr>
            </tbody>
          </nz-table>
          <!-- 分页模块 -->
          <div nz-row style="margin: 10px 0;line-height: 30px;">
            <div nz-col nzSpan="12"></div>
            <div nz-col nzSpan="2">
              <nz-select [(ngModel)]="userPageSize">
                <nz-option required [nzLabel]="'5'" [nzValue]="5"></nz-option>
                <nz-option required [nzLabel]="'10'" [nzValue]="10"></nz-option>
                <nz-option required [nzLabel]="'20'" [nzValue]="20"></nz-option>
                <nz-option required [nzLabel]="'50'" [nzValue]="50"></nz-option>
              </nz-select>
            </div>
            <div nz-col nzSpan="1" *ngIf="changeUserPage !== 1 && totalUser !== 0"><button nz-button nzType="primary" (click)="lastPage('user')"><i class="anticon anticon-left"></i></button></div>
            <div nz-col nzSpan="1" *ngIf="changeUserPage === 1 || totalUser === 0"><button disabled nz-button nzType="primary"><i class="anticon anticon-left"></i></button></div>
            <div nz-col nzSpan="6">当前为 {{changeUserPage}} / {{allUserSize}} 页 &nbsp;&nbsp; 共 {{totalUser}} 条</div>
            <div nz-col nzSpan="1" *ngIf="changeUserPage !== allUserSize && totalUser !== 0"><button nz-button nzType="primary" (click)="nextPage('user')"><i class="anticon anticon-right"></i></button></div>
            <div nz-col nzSpan="1" *ngIf="changeUserPage === allUserSize || totalUser === 0"><button disabled nz-button nzType="primary"><i class="anticon anticon-right"></i></button></div>
          </div>
        </nz-tab>

        <nz-tab nzTitle="订单管理" (nzClick)="changePanel('booking')" *ngIf="commonService.haveMenuPermission('children', '订单管理')">
          <form [formGroup]="searchBookingForm">
            <div nz-row class="search_panel">
              <div nz-col nzSpan="2" class="span_down spacing right_alignment">
                订单状态：
              </div>
              <div nz-col nzSpan="3">
                <nz-select [ngModel]="''" formControlName="status">
                  <nz-option [nzLabel]="'---无---'" [nzValue]="''"></nz-option>
                  <nz-option required [nzLabel]="'待支付'" [nzValue]="'0'"></nz-option>
                  <nz-option required [nzLabel]="'出票中'" [nzValue]="'1'"></nz-option>
                  <nz-option required [nzLabel]="'待出行'" [nzValue]="'2'"></nz-option>
                  <nz-option required [nzLabel]="'已出行'" [nzValue]="'3'"></nz-option>
                  <nz-option required [nzLabel]="'出票失败'" [nzValue]="'4'"></nz-option>
                  <nz-option required [nzLabel]="'退款中'" [nzValue]="'5'"></nz-option>
                  <nz-option required [nzLabel]="'已退款'" [nzValue]="'6'"></nz-option>
                  <nz-option required [nzLabel]="'已取消'" [nzValue]="'7'"></nz-option>
                  <nz-option required [nzLabel]="'交易关闭'" [nzValue]="'8'"></nz-option>
                  <nz-option required [nzLabel]="'改签中'" [nzValue]="'9'"></nz-option>
                  <nz-option required [nzLabel]="'占座中'" [nzValue]="'10'"></nz-option>
                  <nz-option required [nzLabel]="'取消中'" [nzValue]="'11'"></nz-option>
                  <nz-option required [nzLabel]="'退票中'" [nzValue]="'12'"></nz-option>
                </nz-select>
              </div>

              <div nz-col nzSpan="2" class="span_down right_alignment">
                订票类型：
              </div>
              <div nz-col nzSpan="3">
                <nz-select [ngModel]="''" formControlName="type">
                  <nz-option [nzLabel]="'---无---'" [nzValue]="''"></nz-option>
                  <nz-option required [nzLabel]="'机票'" [nzValue]="'1'"></nz-option>
                  <nz-option required [nzLabel]="'火车'" [nzValue]="'2'"></nz-option>
                  <nz-option required [nzLabel]="'酒店'" [nzValue]="'3'"></nz-option>
                  <nz-option required [nzLabel]="'打车'" [nzValue]="'4'"></nz-option>
                </nz-select>
              </div>

              <div nz-col nzSpan="1"></div>

              <div nz-col nzSpan="2" class="span_down right_alignment">
                订单生成日期：
              </div>
              <div nz-col nzSpan="3" class="span_down">
                <nz-date-picker formControlName="date" required [nzFormat]="'yyyy-MM-dd'"></nz-date-picker>
              </div>

              <div nz-col nzSpan="2" class="span_down spacing right_alignment">
                订单编号：
              </div>
              <div nz-col nzSpan="3">
                <input nz-input maxlength="32" formControlName="orderId" placeholder="输入订单编号"
                  nzSize="default">
              </div>

              <div nz-col nzSpan="1"></div>
              <div nz-col nzSpan="2">
                <button nz-button nzType="primary" (click)="doSearch('booking')"><i class="anticon anticon-search"></i>查询</button>
              </div>
            </div>
          </form>

          <nz-table #rowSelectionBookingTable [nzData]="dataOrder" [nzSimple]="true" [(nzPageSize)]="bookingPageSize" [nzShowPagination]="false" [nzScroll]="{x:'1800px'}">
            <thead>
              <tr>
                <th>序号</th>
                <th>订单状态</th>
                <th>订票类型</th>
                <th>订单生成日期</th>
                <th>订单价格</th>
                <th>内部订单号</th>
                <th>企业管家订单号</th>
                <th>订票人信息</th>
                <th>客服备注</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of rowSelectionBookingTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td *ngIf="data.state === 0">待支付</td>
                <td *ngIf="data.state === 1">出票中</td>
                <td *ngIf="data.state === 2">待出行</td>
                <td *ngIf="data.state === 3">已出行</td>
                <td *ngIf="data.state === 4">出票失败</td>
                <td *ngIf="data.state === 5">退款中</td>
                <td *ngIf="data.state === 6">已退款</td>
                <td *ngIf="data.state === 7">已取消</td>
                <td *ngIf="data.state === 8">交易关闭</td>
                <td *ngIf="data.state === 9">改签中</td>
                <td *ngIf="data.state === 10">占座中</td>
                <td *ngIf="data.state === 11">取消中</td>
                <td *ngIf="data.state === 12">退票中</td>

                <td *ngIf="data.orderType === 0 || data.orderType === 1">机票</td>
                <td *ngIf="data.orderType === 2">火车</td>
                <td *ngIf="data.orderType === 3">酒店</td>
                <td *ngIf="data.orderType === 4">打车</td>
                <td *ngIf="data.orderType === 5">充话费</td>

                <td>{{data.createTime}}</td><!-- | date:'yy-MM-dd HH:mm:ss' -->
                <td>{{data.total}}</td>
                <td>{{data.orderId}}</td>
                <td>{{data.actualId}}</td>
                <td nzTitle="婴儿:{{data.type.baby}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;小孩:{{data.type.child}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;成人:{{data.type.major}}" nzPlacement="bottom" nz-tooltip><a>查看信息</a></td>
                <td>{{data.remark}}</td>
                <td>
                  <button nz-button nzType="primary" (click)="showModal('BookingDetail', data)" style="margin-right: 10px;">订单详情</button>
                  <button nz-button nzType="primary" (click)="showModal('InvoiceDetail', data)" style="margin-right: 10px;">发票详情</button>
                  <button nz-button nzType="primary" *ngIf="data.state === 2 && (data.orderType === 0 || data.orderType === 1)" (click)="showModal('Refund', data)" style="margin-right: 10px;">退票</button>
                </td>
              </tr>
            </tbody>
          </nz-table>
          <div nz-row style="margin: 10px 0;line-height: 30px;">
            <div nz-col nzSpan="12"></div>
            <div nz-col nzSpan="2">
              <nz-select [(ngModel)]="bookingPageSize">
                <nz-option required [nzLabel]="'5'" [nzValue]="5"></nz-option>
                <nz-option required [nzLabel]="'10'" [nzValue]="10"></nz-option>
                <nz-option required [nzLabel]="'20'" [nzValue]="20"></nz-option>
                <nz-option required [nzLabel]="'50'" [nzValue]="50"></nz-option>
              </nz-select>
            </div>
            <div nz-col nzSpan="1" *ngIf="changeBookingPage !== 1 && totalBooking !== 0"><button nz-button nzType="primary" (click)="lastPage('booking')"><i class="anticon anticon-left"></i></button></div>
            <div nz-col nzSpan="1" *ngIf="changeBookingPage === 1 || totalBooking === 0"><button disabled nz-button nzType="primary"><i class="anticon anticon-left"></i></button></div>
            <div nz-col nzSpan="6">当前为 {{changeBookingPage}} / {{allBookingSize}} 页 &nbsp;&nbsp; 共 {{totalBooking}} 条</div>
            <div nz-col nzSpan="1" *ngIf="changeBookingPage !== allBookingSize && totalBooking !== 0"><button nz-button nzType="primary" (click)="nextPage('booking')"><i class="anticon anticon-right"></i></button></div>
            <div nz-col nzSpan="1" *ngIf="changeBookingPage === allBookingSize || totalBooking === 0"><button disabled nz-button nzType="primary"><i class="anticon anticon-right"></i></button></div>
          </div>

          <!-- 弹框 —— 信息 —— 发票详情 -->
          <nz-modal [(nzVisible)]="isInvoiceVisible" nzWidth="950" nzTitle="发票详情" [nzFooter]="invoiceDetailModalFooter" (nzOnCancel)="hideModal('InvoiceDetail')">
            <div *ngIf="invoiceDetail.invoiceMsg">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="4" class="right_alignment">发票状态：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.state === 0 ? '开票失败' : invoiceDetail.state === 1 ? '已开票' : invoiceDetail.state === 2 ? '开票中' : invoiceDetail.state === 3 ? '待开票' : invoiceDetail.state === 4 ? '发票作废' : 'null'}}</div>
                <div nz-col nzSpan="4" class="right_alignment">发票类型：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.type === 1 ? '企业' : invoiceDetail.type === 2 ? '个人' : 'null'}}</div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="4" class="right_alignment">开票金额：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.invoicePrice}}</div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="4" class="right_alignment">公司名称：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.invoiceMsg.invoiceName}}</div>
                <div nz-col nzSpan="4" class="right_alignment">纳税人识别号：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.invoiceMsg.dutyParagraph}}</div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="4" class="right_alignment">邮箱：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.invoiceMsg.email}}</div>
                <div nz-col nzSpan="4" class="right_alignment">手机号：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.invoiceMsg.phone}}</div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="4" class="right_alignment">注册地址：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.invoiceMsg.registerAdd}}</div>
                <div nz-col nzSpan="4" class="right_alignment">注册电话：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.invoiceMsg.registerPhone}}</div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="4" class="right_alignment">开户银行：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.invoiceMsg.bank}}</div>
                <div nz-col nzSpan="4" class="right_alignment">开户账户：</div>
                <div nz-col nzSpan="8">{{invoiceDetail.invoiceMsg.account}}</div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="4" class="right_alignment">开票订单号：</div>
                <div nz-col nzSpan="8">
                  <span *ngFor="let item of invoiceDetail.orderIds; let i=index;">
                    {{item}}<br>
                  </span>
                </div>
              </div>
            </div><div *ngIf="!invoiceDetail.invoiceMsg">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="10"></div>
                <div nz-col nzSpan="4">暂无发票详情！</div>
                <div nz-col nzSpan="10"></div>
              </div>
            </div>
            <!-- 弹框和底部定制 -->
            <ng-template #invoiceDetailModalFooter>
              <button nz-button nzType="default" (click)="hideModal('InvoiceDetail')">取消</button>
            </ng-template>
          </nz-modal>

          <!-- 弹框 —— 信息 —— 订单详情 -->
          <nz-modal [(nzVisible)]="isBookingDetailVisible" nzWidth="750" nzTitle="订单详情" [nzFooter]="bookingDetailModalFooter" (nzOnCancel)="hideModal('BookingDetail')">
            <form [formGroup]="modifyBookingForm">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="4"></div>
                <div nz-col nzSpan="7" class="right_alignment">订单id：</div>
                <div nz-col nzSpan="9">{{orderId}}</div>
                <div nz-col nzSpan="4"></div>
              </div>

              <!-- 机票信息 -->
              <div *ngIf="isFlightOrder">
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单数量：</div>
                  <div nz-col nzSpan="9">{{dataDetail.amount}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">目的机场位置：</div>
                  <div nz-col nzSpan="9">{{dataDetail.arr_airport}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">目的城市：</div>
                  <div nz-col nzSpan="9">{{dataDetail.arr_city}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">到达时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.arr_date}} {{dataDetail.arr_time}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">机票类型：</div>
                  <div nz-col nzSpan="9">{{dataDetail.cabin_type}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">联系人：</div>
                  <div nz-col nzSpan="9">{{dataDetail.contact}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">联系人电话：</div>
                  <div nz-col nzSpan="9">{{dataDetail.contact_mobile}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">始发机场：</div>
                  <div nz-col nzSpan="9">{{dataDetail.dept_airport}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">始发城市：</div>
                  <div nz-col nzSpan="9">{{dataDetail.dept_city}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">始发时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.dept_date}} {{dataDetail.dept_time}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">所在航班：</div>
                  <div nz-col nzSpan="9">{{dataDetail.flight_com}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div *ngFor="let item of dataDetail.flight_order_passengers; let i=index;" style="background-color: whitesmoke;">
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}姓名：</div>
                    <div nz-col nzSpan="9">{{item.name}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}属性：</div>
                    <div nz-col nzSpan="9">{{item.age_type}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}生日：</div>
                    <div nz-col nzSpan="9">{{item.birthday}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}证件号：</div>
                    <div nz-col nzSpan="9">{{item.card_no}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}性别：</div>
                    <div nz-col nzSpan="9" *ngIf="item.sex === '1'">男</div>
                    <div nz-col nzSpan="9" *ngIf="item.sex === '2'">女</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">旅程时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.flight_times}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">航班类型：</div>
                  <div nz-col nzSpan="9">{{dataDetail.flight_type}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">企业管家编号：</div>
                  <div nz-col nzSpan="9"><a (click)="showExternal(1, dataDetail.no)">{{dataDetail.no}}</a></div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单价格：</div>
                  <div nz-col nzSpan="9">{{dataDetail.order_amount}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单类型：</div>
                  <div nz-col nzSpan="9">{{dataDetail.order_type}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">备注：</div>
                  <div nz-col nzSpan="9">{{dataDetail.remark}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">当前订单状态：</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 0">待支付</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 1">出票中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 2">待出行</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 3">已出行</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 4">出票失败</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 5">退款中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 6">已退款</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 7">已取消</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 8">交易关闭</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 9">改签中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 10">占座中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 11">取消中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 12">退票中</div>
                  <div nz-col nzSpan="4"></div>
                </div>
              </div>

              <!-- 酒店信息 -->
              <div *ngIf="isHotelOrder">
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">到达时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.arrival_date}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">是否可取消：</div>
                  <div nz-col nzSpan="9" *ngIf="dataDetail.cancel_policy.allowed === true">可以取消</div>
                  <div nz-col nzSpan="9" *ngIf="dataDetail.cancel_policy.allowed === false">不可取消</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">取消说明：</div>
                  <div nz-col nzSpan="9">{{dataDetail.cancel_policy.penalty_type_name}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">取消时限：</div>
                  <div nz-col nzSpan="9">{{dataDetail.cancel_policy.time_limit}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">手续费：</div>
                  <div nz-col nzSpan="9">{{dataDetail.hotelOrderReturn.detail.penalty}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">最晚到达时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.cancel_policy.time_limit}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">联系人电话：</div>
                  <div nz-col nzSpan="9">{{dataDetail.contact_mobile}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">联系人姓名：</div>
                  <div nz-col nzSpan="9">{{dataDetail.contact_name}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单创建时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.createAt}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div *ngFor="let item of dataDetail.customers; let i=index;" style="background-color: whitesmoke;">
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">入住成员{{i}}：</div>
                    <div nz-col nzSpan="9">{{item.name}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">离开时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.departure_date}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单价格：</div>
                  <div nz-col nzSpan="9">{{dataDetail.hotelOrderReturn.order_amount}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">酒店订单编号：</div>
                  <div nz-col nzSpan="9"><a (click)="showExternal(3, dataDetail.hotelOrderReturn.no)">{{dataDetail.hotelOrderReturn.no}}</a></div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">酒店订单状态：</div>
                  <div nz-col nzSpan="9">{{dataDetail.hotelOrderReturn.state_name}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">酒店订单创建时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.hotelOrderReturn.created_at}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">酒店所在城市：</div>
                  <div nz-col nzSpan="9">{{dataDetail.hotel_city}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">酒店编号：</div>
                  <div nz-col nzSpan="9">{{dataDetail.hotel_id}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">酒店名称：</div>
                  <div nz-col nzSpan="9">{{dataDetail.hotel_name}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">酒店评价：</div>
                  <div nz-col nzSpan="9">{{dataDetail.hotel_score}}分</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">最晚到达时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.latest_arrival_time}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">房间类型：</div>
                  <div nz-col nzSpan="9">{{dataDetail.order_room.bed_type}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">房间容纳人数：</div>
                  <div nz-col nzSpan="9">{{dataDetail.order_room.capacity}}人</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">房间小孩人数：</div>
                  <div nz-col nzSpan="9">{{dataDetail.order_room.children}}人</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">房间是否有早餐：</div>
                  <div nz-col nzSpan="9">{{dataDetail.order_room.meal}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">房间规格：</div>
                  <div nz-col nzSpan="9">{{dataDetail.order_room.rate_type_name}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">房间占地面积：</div>
                  <div nz-col nzSpan="9">{{dataDetail.order_room.roomArea}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">房间特色：</div>
                  <div nz-col nzSpan="9">{{dataDetail.order_room.room_type_name}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <!-- <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">酒店所在区：</div>
                  <div nz-col nzSpan="9">{{dataDetail.peripheral_information}}</div>
                  <div nz-col nzSpan="4"></div>
                </div> -->
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">预订房间数量：</div>
                  <div nz-col nzSpan="9">{{dataDetail.room_nums}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">信息来源：</div>
                  <div nz-col nzSpan="9">{{dataDetail.source}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">酒店星级：</div>
                  <div nz-col nzSpan="9">{{dataDetail.stars_level}}星级</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">用户Id：</div>
                  <div nz-col nzSpan="9">{{dataDetail.userId}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">当前订单状态：</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 0">待支付</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 1">出票中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 2">待出行</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 3">已出行</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 4">出票失败</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 5">退款中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 6">已退款</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 7">已取消</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 8">交易关闭</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 9">改签中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 10">占座中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 11">取消中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 12">退票中</div>
                  <div nz-col nzSpan="4"></div>
                </div>
              </div>

              <!-- 火车信息 -->
              <div *ngIf="isTrainOrder">
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单创建时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.created_at}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单编号：</div>
                  <div nz-col nzSpan="9"><a (click)="showExternal(2, dataDetail.no)">{{dataDetail.no}}</a></div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">到达时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.arrival_at}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">到达城市：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.arrival_city_name}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">变更差价：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.change_price_diff}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">变更服务价格：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.change_service_charge}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">联系人电话：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.contact_mobile}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">联系人姓名：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.contacts}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">出发时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.departure_at}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">出发城市：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.departure_city_name}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">出发站台：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.from_station}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">到达站台：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.to_station}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">火车编号：</div>
                  <div nz-col nzSpan="9">{{dataDetail.service_order.train_no}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div *ngFor="let item of dataDetail.service_order.tickets; let i=index;" style="background-color: whitesmoke;">
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">车票{{i+1}}退款价：</div>
                    <div nz-col nzSpan="9">{{item.estimate_refund_price}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">车票{{i+1}}变更价格：</div>
                    <div nz-col nzSpan="9">{{item.estimate_refund_service_charge}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">车票{{i+1}}编号：</div>
                    <div nz-col nzSpan="9">{{item.id}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">车票{{i+1}}价格：</div>
                    <div nz-col nzSpan="9">{{item.price}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">车票{{i+1}}退款费用：</div>
                    <div nz-col nzSpan="9">{{item.refund_price}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">车票{{i+1}}退款服务费：</div>
                    <div nz-col nzSpan="9">{{item.refund_service_charge}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">车票{{i+1}}座位类型：</div>
                    <div nz-col nzSpan="9">{{item.seat_category}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">车票{{i+1}}状态：</div>
                    <div nz-col nzSpan="9">{{item.state_name}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}生日：</div>
                    <div nz-col nzSpan="9">{{item.passenger.birthday}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}编号：</div>
                    <div nz-col nzSpan="9">{{item.passenger.id_no}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}身份证：</div>
                    <div nz-col nzSpan="9">{{item.passenger.id_type_name}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}姓名：</div>
                    <div nz-col nzSpan="9">{{item.passenger.name}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}类型：</div>
                    <div nz-col nzSpan="9">{{item.passenger.passenger_type_name}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}是否退款：</div>
                    <div nz-col nzSpan="9" *ngIf="item.passenger.refund === true">是</div>
                    <div nz-col nzSpan="9" *ngIf="item.passenger.refund === false">否</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                  <div nz-row class="search_panel">
                    <div nz-col nzSpan="4"></div>
                    <div nz-col nzSpan="7" class="right_alignment">乘客{{i+1}}性别：</div>
                    <div nz-col nzSpan="9">{{item.passenger.sex_name}}</div>
                    <div nz-col nzSpan="4"></div>
                  </div>
                </div>

                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单情况：</div>
                  <div nz-col nzSpan="9">{{dataDetail.state_name}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">当前订单状态：</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 0">待支付</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 1">出票中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 2">待出行</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 3">已出行</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 4">出票失败</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 5">退款中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 6">已退款</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 7">已取消</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 8">交易关闭</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 9">改签中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 10">占座中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 11">取消中</div>
                  <div nz-col nzSpan="9" *ngIf="orderStatus === 12">退票中</div>
                  <div nz-col nzSpan="4"></div>
                </div>
              </div>

              <!-- 打车信息 -->
              <div *ngIf="isTaxiOrder">
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单状态：</div>
                  <div nz-col nzSpan="9">{{dataDetail.state}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单生成时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.createTime}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">预估价格：</div>
                  <div nz-col nzSpan="9">{{dataDetail.estimatePrice}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">内部订单号：</div>
                  <div nz-col nzSpan="9">{{dataDetail.orderId}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">出发地：</div>
                  <div nz-col nzSpan="9">{{dataDetail.deptAdd}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">目的地：</div>
                  <div nz-col nzSpan="9">{{dataDetail.arrAdd}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">用户账号：</div>
                  <div nz-col nzSpan="9">{{dataDetail.userPhone}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">用户昵称：</div>
                  <div nz-col nzSpan="9">{{dataDetail.userName}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">打车平台：</div>
                  <div nz-col nzSpan="9">{{dataDetail.source}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">司机电话：</div>
                  <div nz-col nzSpan="9">{{dataDetail.driverPhone}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">车牌号码：</div>
                  <div nz-col nzSpan="9">{{dataDetail.carNo}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">订单类型：</div>
                  <div nz-col nzSpan="9">{{dataDetail.orderType}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">出行时间：</div>
                  <div nz-col nzSpan="9">{{dataDetail.startTime}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">实付价格：</div>
                  <div nz-col nzSpan="9">{{dataDetail.paymentPrice}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
                <div nz-row class="search_panel">
                  <div nz-col nzSpan="4"></div>
                  <div nz-col nzSpan="7" class="right_alignment">企业管家订单号：</div>
                  <div nz-col nzSpan="9">{{dataDetail.actualId}}</div>
                  <div nz-col nzSpan="4"></div>
                </div>
              </div>

              <div nz-row class="search_panel" *ngIf="!isHotelOrder">
                <div nz-col nzSpan="4"></div>
                <div nz-col nzSpan="7" class="right_alignment">修改订单状态：</div>
                <div nz-col nzSpan="6" class="right_alignment">
                  <nz-select [ngModel]="''" formControlName="updateType">
                    <nz-option [nzLabel]="'-------无-------'" [nzValue]="''"></nz-option>
                    <nz-option required [nzLabel]="'出票中 => 待出行'" [nzValue]="'1'"></nz-option>
                    <nz-option *ngIf="!isTrainOrder" required [nzLabel]="'退票中 => 退款中'" [nzValue]="'2'"></nz-option>
                  </nz-select>
                </div>
                <div nz-col nzSpan="1"></div>
                <div nz-col nzSpan="3"><button nz-button nzType="primary" (click)="showModal('modifyBooking', '')" style="margin-right: 10px;">修改</button></div>
                <div nz-col nzSpan="3"></div>
              </div>
            </form>
            <!-- 弹框和底部定制 待出行且为酒店时 才可取消订单 -->
            <ng-template #bookingDetailModalFooter>
              <button *ngIf="isHotelOrder && orderStatus===2" nz-button nzType="primary" (click)="cancleHotelOrder()">取消订单</button>
              <button nz-button nzType="default" (click)="hideModal('BookingDetail')">取消</button>
            </ng-template>
          </nz-modal>

          <!-- 弹框 —— 信息 —— 退票申请 -->
          <nz-modal [(nzVisible)]="isRefundVisible" nzWidth="950" nzTitle="退票申请" [nzFooter]="refundModalFooter" (nzOnCancel)="hideModal('Refund')">
            <div nz-row class="search_panel">
              <div nz-col nzSpan="24">选择退票机票</div>
            </div>
            <div nz-row class="search_panel" *ngFor="let data of dataRefund; let i=index;">
              <div nz-col nzSpan="1">
                <nz-radio-group [(ngModel)]="refundRadio">
                  <label nz-radio [nzValue]="data.passengerName"></label>
                </nz-radio-group>
              </div>
              <div nz-col nzSpan="2" style="font-weight: bold;">乘客{{i+1}}</div>
              <div nz-col nzSpan="2">{{data.passengerName}}</div>
              <div nz-col nzSpan="2" style="font-weight: bold;">证件号{{i+1}}</div>
              <div nz-col nzSpan="7">{{data.cardNum}}</div>
              <div nz-col nzSpan="2" style="font-weight: bold;">退票原因</div>
              <div nz-col nzSpan="8">
                <nz-select [ngModel]="data.msg" (ngModelChange)="onRefundMsgChange($event, i)">
                  <nz-option required *ngFor="let item of data.msg; let i=index;" [nzLabel]="item" [nzValue]="item"></nz-option>
                </nz-select>
              </div>
            </div>
            <!-- 弹框和底部定制 -->
            <ng-template #refundModalFooter>
              <button nz-button nzType="primary" (click)="doDelete('Refund')">提交</button>
              <button nz-button nzType="default" (click)="hideModal('Refund')">取消</button>
            </ng-template>
          </nz-modal>

        </nz-tab>

        <nz-tab nzTitle="数据调整" (nzClick)="changePanel('adjust')" *ngIf="commonService.haveMenuPermission('children', '数据调整')">
          <div nz-row class="search_panel">
            <div nz-col nzSpan="7">
              <nz-range-picker [nzFormat]="'yyyyMMdd'" [nzShowToday]="true" ngModel [nzRanges]="dateSearch" (ngModelChange)="onChange($event)"></nz-range-picker>
            </div>
            <div nz-col nzSpan="1"></div>
            <div nz-col nzSpan="4">
              <nz-select [(ngModel)]="adjustType">
                <nz-option required [nzLabel]="'小悟豆'" nzValue="BEAN"></nz-option>
                <nz-option required [nzLabel]="'小悟币'" nzValue="COIN"></nz-option>
              </nz-select>
            </div>
            <div nz-col nzSpan="9"></div>
            <div nz-col nzSpan="3">
              <button nz-button nzType="primary" (click)="showModal('adjustAdd', '')"><i class="anticon anticon-search"></i>新增发放</button>
            </div>
          </div>

          <nz-table #rowSelectionUserTable [nzData]="adjustData" [nzSimple]="true" [nzShowPagination]="false">
            <thead>
              <tr>
                <th>序号</th>
                <th>发放日期</th>
                <th>发放时间</th>
                <th>发放人数</th>
                <th>失败人数</th>
                <th>货币类型</th>
                <th>数量</th>
                <th>调整原因</th>
                <th>操作人</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of rowSelectionUserTable.data; let i=index;">
                <td>{{i+1}}</td>
                <td>{{data.createDate | date:'yyyy-MM-dd' }}</td>
                <td>{{data.createTime}}</td>
                <td>{{data.all}}</td>
                <td>{{data.failNum}}</td>
                <td>{{data.adjustType === 'BEAN' ? '小悟豆' : data.adjustType === 'COIN' ? '小悟币' : 'null'}}</td>
                <td>{{data.adjustAmount}}</td>
                <td>{{data.adjustReason}}</td>
                <td>{{data.operater.phone}}</td>
                <td>
                  <button nz-button nzType="primary" (click)="showModal('adjustDetail', data)" style="margin-right: 10px;">查看</button>
                </td>
              </tr>
            </tbody>
          </nz-table>

          <!-- 弹框 —— 新增 —— 新增发放 -->
          <nz-modal [(nzVisible)]="isAdjustAddVisible" nzWidth="950" nzTitle="新增发放" [nzFooter]="adjustAddModalFooter" (nzOnCancel)="hideModal('adjustAdd')">
            <form [formGroup]="addAdjustForm">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="3" class="span_down" style="font-size: 20px;font-weight: bold;">发送对象</div>
                <div nz-col nzSpan="1"></div>
                <div nz-col nzSpan="20" style="color: #a9a9a9">
                  请填写发送的用户id（手机号码），如果需要发送多个，请换行输入<br>单次发送人数上限：10000（如果需要调整，请通知产品）
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="3">
                </div>
                <div nz-col nzSpan="12">
                  <textarea rows="5" nz-input formControlName="users" placeholder="请输入发送对象手机号" nzSize="default"></textarea>
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="3" class="span_down" style="font-size: 20px;font-weight: bold;">附带消息</div>
                <div nz-col nzSpan="1"></div>
                <div nz-col nzSpan="20" class="span_down" style="color: #a9a9a9">
                  一般适用于奖励/补偿用户，附带的信息
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="3" class="span_down right_alignment">
                  标题：
                </div>
                <div nz-col nzSpan="9">
                  <input nz-input nzSize="default" formControlName="noticeTitle">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="3" class="span_down right_alignment">
                  类型：
                </div>
                <div nz-col nzSpan="9" class="span_down">
                  系统消息
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="3" class="span_down right_alignment">
                  摘要：
                </div>
                <div nz-col nzSpan="9">
                  <input nz-input nzSize="default" formControlName="noticeAbstract">
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="3" class="span_down right_alignment">
                  内容：
                </div>
                <div nz-col nzSpan="9">
                  <textarea rows="5" nz-input formControlName="noticeContent" placeholder="请输入调整原因" nzSize="default"></textarea>
                </div>
              </div>

              <div nz-row class="search_panel">
                <div nz-col nzSpan="4" class="span_down" style="font-size: 20px;font-weight: bold;">发送奖励配置</div>
                <div nz-col nzSpan="1"></div>
                <div nz-col nzSpan="19" class="span_down" style="color: #a9a9a9">
                  正数为增加，负数为减少
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="24">
                  <nz-radio-group [(ngModel)]="adjustTypeAdd" formControlName="adjustType">
                    <div nz-row class="search_panel">
                      <div nz-col nzSpan="4"><label nz-radio nzValue="BEAN">小悟豆</label></div>
                      <div nz-col nzSpan="4"><input nz-input maxlength="2" formControlName="adjustAmount" [ngModel]="''" nzSize="default"></div>
                      <div nz-col nzSpan="2"></div>
                      <div nz-col nzSpan="4"><label nz-radio nzValue="COIN">小悟币</label></div>
                      <div nz-col nzSpan="4"><input nz-input maxlength="2" formControlName="adjustAmount" [ngModel]="''" nzSize="default"></div>
                    </div>
                  </nz-radio-group>
                </div>
              </div>

              <div nz-row class="search_panel">
                <div nz-col nzSpan="3" class="span_down" style="font-size: 20px;font-weight: bold;">调整原因</div>
                <div nz-col nzSpan="1"></div>
                <div nz-col nzSpan="20" class="span_down" style="color: #a9a9a9">
                  调整原因，是为了后面追溯的时候，能够追溯到为什么有这个操作，也方便归因
                </div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="3">
                </div>
                <div nz-col nzSpan="12">
                  <textarea rows="5" nz-input formControlName="adjustReason" placeholder="请输入调整原因" nzSize="default"></textarea>
                </div>
              </div>

            </form>
            <!-- 弹框和底部定制 -->
            <ng-template #adjustAddModalFooter>
              <button nz-button nzType="primary" (click)="showModal('adjustSend')">确定</button>
              <button nz-button nzType="default" (click)="hideModal('adjustAdd')">取消</button>
            </ng-template>
          </nz-modal>

          <!-- 弹框 —— 发送 —— 执行发送 -->
          <nz-modal [(nzVisible)]="isAdjustSendVisible" nzWidth="750" nzTitle="执行发送" [nzFooter]="adjustSendModalFooter" (nzOnCancel)="hideModal('adjustSend')">
            <div nz-row class="search_panel">
              <div nz-col nzSpan="7" class="spthumbnailan_down">发送对象（总计x个）</div>
              <div nz-col nzSpan="1"></div>
              <div nz-col nzSpan="7" class="spthumbnailan_down">奖励配置</div>
              <div nz-col nzSpan="1"></div>
              <div nz-col nzSpan="7" class="spthumbnailan_down">附带消息</div>
              <div nz-col nzSpan="1"></div>
            </div>
            <div nz-row class="search_panel">
              <div nz-col nzSpan="7">
                <textarea rows="5" nz-input [(ngModel)]="adjustSendData.users" [disabled]="true" nzSize="default"></textarea>
              </div>
              <div nz-col nzSpan="1"></div>
              <div nz-col nzSpan="7">
                <textarea rows="5" nz-input [(ngModel)]="adjustSendData.config" [disabled]="true" zSize="default"></textarea>
              </div>
              <div nz-col nzSpan="1"></div>
              <div nz-col nzSpan="7">
                <textarea rows="5" nz-input [(ngModel)]="adjustSendData.noticeContent" [disabled]="true" zSize="default"></textarea>
              </div>
              <div nz-col nzSpan="1"></div>
            </div>

            <div nz-row class="search_panel">
              <div nz-col nzSpan="4">
                <nz-select [(ngModel)]="operateObject.operater">
                  <nz-option required *ngFor="let data of operatersData; let i=index;" [nzLabel]="data" [nzValue]="data"></nz-option>
                </nz-select>
              </div>
              <div nz-col nzSpan="2"></div>
              <div nz-col nzSpan="3">
                <button nz-button nzType="primary" (click)="doSave('sendMsg')" [disabled]="semdMesCodeText !== 60">{{semdMesCodeText === 60 ? '验证' : semdMesCodeText + 's'}}</button>
              </div>
            </div>

            <div nz-row class="search_panel">
              <div nz-col nzSpan="4" class="right_alignment span_down">
                验证码：
              </div>
              <div nz-col nzSpan="2"></div>
              <div nz-col nzSpan="2">
                <input nz-input nzSize="default" maxlength="4" [(ngModel)]="operateObject.code">
              </div>
            </div>
            <!-- 弹框和底部定制 -->
            <ng-template #adjustSendModalFooter>
              <button nz-button nzType="primary" (click)="doSave('adjustSend')" [disabled]="operateObject.code.length !== 4">执行发送</button>
              <button nz-button nzType="default" (click)="hideModal('adjustSend')">放弃</button>
            </ng-template>
          </nz-modal>

          <!-- 弹框 —— 查看 —— 查看详情 -->
          <nz-modal [(nzVisible)]="isAdjustDetailVisible" nzWidth="950" nzTitle="查看详情" [nzFooter]="adjustDetailModalFooter" (nzOnCancel)="hideModal('adjustDetail')">
            <div *ngIf="adjustDetail">
              <div nz-row class="search_panel">
                <div nz-col nzSpan="2"></div>
                <div nz-col nzSpan="5" class="span_down">发放日期<br>{{adjustDetail.createDate ? (adjustDetail.createDate | date:'yyyy-MM-dd') : 'null'}}</div>
                <div nz-col nzSpan="5" class="span_down">发放时间<br>{{adjustDetail.createTime}}</div>
                <div nz-col nzSpan="5" class="span_down">发放人数<br>{{adjustDetail.all}}</div>
                <div nz-col nzSpan="5" class="span_down">失败人数<br>{{adjustDetail.failNum}}</div>
                <!-- adjustDetail.errorRevL.length -->
                <div nz-col nzSpan="2"></div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="11" class="spthumbnailan_down">发送成功（总计{{adjustDetail.successNum}}个）</div>
                <div nz-col nzSpan="1"></div>
                <div nz-col nzSpan="11" class="spthumbnailan_down">奖励配置</div>
                <div nz-col nzSpan="1"></div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="11">
                  <textarea rows="5" nz-input [(ngModel)]="adjustDetail.success" [disabled]="true" nzSize="default"></textarea>
                </div>
                <div nz-col nzSpan="1"></div>
                <div nz-col nzSpan="11">
                  <textarea rows="5" nz-input [(ngModel)]="(adjustDetail.adjustType === 'BEAN' ? '小悟豆' : adjustDetail.adjustType === 'COIN' ? '小悟币' : null) + '*' + adjustDetail.adjustAmount" [disabled]="true" zSize="default"></textarea>
                </div>
                <div nz-col nzSpan="1"></div>
              </div>

              <div nz-row class="search_panel">
                <div nz-col nzSpan="11" class="spthumbnailan_down">失败对象(总计{{adjustDetail.failNum}}个)</div>
                <div nz-col nzSpan="1"></div>
                <div nz-col nzSpan="11" class="spthumbnailan_down">附带消息</div>
                <div nz-col nzSpan="1"></div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="11">
                  <textarea rows="5" nz-input [(ngModel)]="adjustDetail.fail" [disabled]="true" nzSize="default"></textarea>
                </div>
                <div nz-col nzSpan="1"></div>
                <div nz-col nzSpan="11">
                  <textarea rows="5" nz-input [(ngModel)]="adjustDetail.noticeContent" [disabled]="true" nzSize="default"></textarea>
                </div>
                <div nz-col nzSpan="1"></div>
              </div>

              <div nz-row class="search_panel">
                <div nz-col nzSpan="11" class="spthumbnailan_down">调整原因</div>
                <div nz-col nzSpan="1"></div>
              </div>
              <div nz-row class="search_panel">
                <div nz-col nzSpan="11">
                  <textarea rows="5" nz-input [(ngModel)]="adjustDetail.adjustReason" [disabled]="true" nzSize="default"></textarea>
                </div>
                <div nz-col nzSpan="1"></div>
              </div>
            </div>
            <!-- 弹框和底部定制 -->
            <ng-template #adjustDetailModalFooter>
              <button nz-button nzType="default" (click)="hideModal('adjustDetail')">关闭</button>
            </ng-template>
          </nz-modal>

        </nz-tab>

      </nz-tabset>
    </nz-card-tab>
  </nz-card>
</div>
